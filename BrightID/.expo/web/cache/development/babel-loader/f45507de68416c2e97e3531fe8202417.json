{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { create } from 'apisauce';\nimport nacl from 'tweetnacl';\nimport stringify from 'fast-json-stable-stringify';\nimport { strToUint8Array, uInt8ArrayToB64, hash, b64ToUint8Array } from \"../utils/encoding\";\nimport BrightidError from \"./brightidError\";\nvar v = 6;\nexport var NodeApi = function () {\n  function NodeApi(_ref) {\n    var url = _ref.url,\n        secretKey = _ref.secretKey,\n        id = _ref.id,\n        monitor = _ref.monitor;\n\n    _classCallCheck(this, NodeApi);\n\n    this.baseUrlInternal = url;\n    this.id = id;\n    this.secretKey = secretKey;\n    this.api = create({\n      baseURL: this.apiUrl,\n      headers: {\n        'Cache-Control': 'no-cache'\n      },\n      timeout: 60 * 1000\n    });\n    monitor && this.api.addMonitor(function (response) {\n      return monitor(response);\n    });\n  }\n\n  _createClass(NodeApi, [{\n    key: \"baseUrl\",\n    get: function get() {\n      return this.baseUrlInternal;\n    },\n    set: function set(url) {\n      this.baseUrlInternal = url;\n      this.api.setBaseURL(this.apiUrl);\n    }\n  }, {\n    key: \"apiUrl\",\n    get: function get() {\n      return this.baseUrl + \"/brightid/v\" + v;\n    }\n  }, {\n    key: \"submitOp\",\n    value: function submitOp(signedOp, message) {\n      var res, submittedOp;\n      return _regeneratorRuntime.async(function submitOp$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(this.api.post(\"/operations\", signedOp));\n\n            case 2:\n              res = _context.sent;\n              NodeApi.throwOnError(res);\n              submittedOp = signedOp;\n              submittedOp.hash = NodeApi.checkHash(res, message);\n              submittedOp.postTimestamp = Date.now();\n              return _context.abrupt(\"return\", submittedOp);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"requiresCredentials\",\n    value: function requiresCredentials() {\n      if (this.id === undefined || this.secretKey === undefined) {\n        throw new Error('Missing API credentials');\n      }\n    }\n  }, {\n    key: \"addConnection\",\n    value: function addConnection(id1, id2, level, timestamp, reportReason, requestProof, fakeUser) {\n      var sk, name, op, message;\n      return _regeneratorRuntime.async(function addConnection$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              this.requiresCredentials();\n              sk = fakeUser ? b64ToUint8Array(fakeUser.secretKey) : this.secretKey;\n              name = 'Connect';\n              op = {\n                name: name,\n                id1: id1,\n                id2: id2,\n                level: level,\n                timestamp: timestamp,\n                v: v\n              };\n\n              if (reportReason) {\n                op.reportReason = reportReason;\n              }\n\n              if (requestProof) {\n                op.requestProof = requestProof;\n              }\n\n              message = stringify(op);\n              console.log(\"Connect message: \" + message);\n              op.sig1 = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), sk));\n              return _context2.abrupt(\"return\", this.submitOp(op, message));\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"createGroup\",\n    value: function createGroup(groupId, url, type) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function createGroup$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Add Group';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                group: groupId,\n                url: url,\n                type: type,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context3.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"dismiss\",\n    value: function dismiss(dismissee, group) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function dismiss$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Dismiss';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                dismisser: this.id,\n                dismissee: dismissee,\n                group: group,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context4.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"invite\",\n    value: function invite(invitee, group, data) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function invite$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Invite';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                inviter: this.id,\n                invitee: invitee,\n                group: group,\n                data: data,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context5.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"addAdmin\",\n    value: function addAdmin(newAdmin, group) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function addAdmin$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Add Admin';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                admin: newAdmin,\n                group: group,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context6.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"deleteGroup\",\n    value: function deleteGroup(group) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function deleteGroup$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Remove Group';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                group: group,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context7.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"joinGroup\",\n    value: function joinGroup(group, fakeUser) {\n      var brightId, secretKey, name, timestamp, op, message;\n      return _regeneratorRuntime.async(function joinGroup$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              this.requiresCredentials();\n\n              if (fakeUser) {\n                brightId = fakeUser.id;\n                secretKey = b64ToUint8Array(fakeUser.secretKey);\n              } else {\n                brightId = this.id;\n                secretKey = this.secretKey;\n              }\n\n              name = 'Add Membership';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: brightId,\n                group: group,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), secretKey));\n              return _context8.abrupt(\"return\", this.submitOp(op, message));\n\n            case 8:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"leaveGroup\",\n    value: function leaveGroup(group) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function leaveGroup$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Remove Membership';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                group: group,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context9.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"socialRecovery\",\n    value: function socialRecovery(params) {\n      var op, message;\n      return _regeneratorRuntime.async(function socialRecovery$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              op = {\n                name: 'Social Recovery',\n                id: params.id,\n                signingKey: params.signingKey,\n                timestamp: params.timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.id1 = params.id1;\n              op.id2 = params.id2;\n              op.sig1 = params.sig1;\n              op.sig2 = params.sig2;\n              return _context10.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"addSigningKey\",\n    value: function addSigningKey(signingKey) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function addSigningKey$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Add Signing Key';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                signingKey: signingKey,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context11.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"removeSigningKey\",\n    value: function removeSigningKey(signingKey) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function removeSigningKey$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Remove Signing Key';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                signingKey: signingKey,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              return _context12.abrupt(\"return\", this.submitOp(op, message));\n\n            case 7:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"linkContextId\",\n    value: function linkContextId(context, contextId) {\n      var name, timestamp, op, message, api, res, submittedOp;\n      return _regeneratorRuntime.async(function linkContextId$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              this.requiresCredentials();\n              name = 'Link ContextId';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                id: this.id,\n                context: context,\n                contextId: contextId,\n                timestamp: timestamp,\n                v: 5\n              };\n              message = stringify(op);\n              op.sig = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), this.secretKey));\n              api = create({\n                baseURL: this.baseUrl + \"/brightid/v5\",\n                headers: {\n                  'Cache-Control': 'no-cache'\n                }\n              });\n              _context13.next = 9;\n              return _regeneratorRuntime.awrap(api.post(\"/operations\", op));\n\n            case 9:\n              res = _context13.sent;\n              NodeApi.throwOnError(res);\n              submittedOp = op;\n              submittedOp.hash = NodeApi.checkHash(res, message);\n              submittedOp.postTimestamp = Date.now();\n              return _context13.abrupt(\"return\", submittedOp);\n\n            case 15:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getGroup\",\n    value: function getGroup(id) {\n      var res;\n      return _regeneratorRuntime.async(function getGroup$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/groups/\" + id));\n\n            case 2:\n              res = _context14.sent;\n              NodeApi.throwOnError(res);\n              return _context14.abrupt(\"return\", res.data.data);\n\n            case 5:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getProfile\",\n    value: function getProfile(id) {\n      var requester, url, res;\n      return _regeneratorRuntime.async(function getProfile$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              requester = this.id;\n              url = \"/users/\" + id + \"/profile/\" + (requester || '');\n              _context15.next = 4;\n              return _regeneratorRuntime.awrap(this.api.get(url));\n\n            case 4:\n              res = _context15.sent;\n              NodeApi.throwOnError(res);\n              return _context15.abrupt(\"return\", res.data.data);\n\n            case 7:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getVerifications\",\n    value: function getVerifications(id) {\n      var res;\n      return _regeneratorRuntime.async(function getVerifications$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              _context16.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/users/\" + id + \"/verifications\"));\n\n            case 2:\n              res = _context16.sent;\n              NodeApi.throwOnError(res);\n              return _context16.abrupt(\"return\", res.data.data.verifications);\n\n            case 5:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getConnections\",\n    value: function getConnections(id, direction) {\n      var _data;\n\n      var res;\n      return _regeneratorRuntime.async(function getConnections$(_context17) {\n        while (1) {\n          switch (_context17.prev = _context17.next) {\n            case 0:\n              _context17.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/users/\" + id + \"/connections/\" + direction));\n\n            case 2:\n              res = _context17.sent;\n              NodeApi.throwOnError(res);\n              return _context17.abrupt(\"return\", (_data = res.data.data) == null ? void 0 : _data.connections);\n\n            case 5:\n            case \"end\":\n              return _context17.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getMemberships\",\n    value: function getMemberships(id) {\n      var _data2;\n\n      var res;\n      return _regeneratorRuntime.async(function getMemberships$(_context18) {\n        while (1) {\n          switch (_context18.prev = _context18.next) {\n            case 0:\n              _context18.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/users/\" + id + \"/memberships\"));\n\n            case 2:\n              res = _context18.sent;\n              NodeApi.throwOnError(res);\n              return _context18.abrupt(\"return\", (_data2 = res.data.data) == null ? void 0 : _data2.memberships);\n\n            case 5:\n            case \"end\":\n              return _context18.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getInvites\",\n    value: function getInvites(id) {\n      var _data3;\n\n      var res;\n      return _regeneratorRuntime.async(function getInvites$(_context19) {\n        while (1) {\n          switch (_context19.prev = _context19.next) {\n            case 0:\n              _context19.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/users/\" + id + \"/invites\"));\n\n            case 2:\n              res = _context19.sent;\n              NodeApi.throwOnError(res);\n              return _context19.abrupt(\"return\", (_data3 = res.data.data) == null ? void 0 : _data3.invites);\n\n            case 5:\n            case \"end\":\n              return _context19.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getOperationState\",\n    value: function getOperationState(opHash) {\n      var res;\n      return _regeneratorRuntime.async(function getOperationState$(_context20) {\n        while (1) {\n          switch (_context20.prev = _context20.next) {\n            case 0:\n              _context20.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/operations/\" + opHash));\n\n            case 2:\n              res = _context20.sent;\n\n              if (!(res.status === 404)) {\n                _context20.next = 5;\n                break;\n              }\n\n              return _context20.abrupt(\"return\", {\n                state: 'unknown',\n                result: ''\n              });\n\n            case 5:\n              NodeApi.throwOnError(res);\n              return _context20.abrupt(\"return\", res.data.data);\n\n            case 7:\n            case \"end\":\n              return _context20.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getApps\",\n    value: function getApps() {\n      var _data4;\n\n      var res;\n      return _regeneratorRuntime.async(function getApps$(_context21) {\n        while (1) {\n          switch (_context21.prev = _context21.next) {\n            case 0:\n              _context21.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/apps\"));\n\n            case 2:\n              res = _context21.sent;\n              NodeApi.throwOnError(res);\n              return _context21.abrupt(\"return\", (_data4 = res.data.data) == null ? void 0 : _data4.apps);\n\n            case 5:\n            case \"end\":\n              return _context21.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      var res;\n      return _regeneratorRuntime.async(function getState$(_context22) {\n        while (1) {\n          switch (_context22.prev = _context22.next) {\n            case 0:\n              _context22.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/state\"));\n\n            case 2:\n              res = _context22.sent;\n              NodeApi.throwOnError(res);\n              return _context22.abrupt(\"return\", res.data.data);\n\n            case 5:\n            case \"end\":\n              return _context22.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getPublic\",\n    value: function getPublic(app, roundedTimestamp, verification) {\n      var res;\n      return _regeneratorRuntime.async(function getPublic$(_context23) {\n        while (1) {\n          switch (_context23.prev = _context23.next) {\n            case 0:\n              console.log(15, app, roundedTimestamp, verification);\n              _context23.next = 3;\n              return _regeneratorRuntime.awrap(this.api.get(\"/verifications/blinded/public\", {\n                app: app,\n                roundedTimestamp: roundedTimestamp,\n                verification: verification\n              }));\n\n            case 3:\n              res = _context23.sent;\n              NodeApi.throwOnError(res);\n              return _context23.abrupt(\"return\", res.data.data.public);\n\n            case 6:\n            case \"end\":\n              return _context23.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getBlindedSig\",\n    value: function getBlindedSig(pub, sig, e) {\n      var res;\n      return _regeneratorRuntime.async(function getBlindedSig$(_context24) {\n        while (1) {\n          switch (_context24.prev = _context24.next) {\n            case 0:\n              _context24.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/verifications/blinded/sig/\" + this.id, {\n                public: pub,\n                sig: sig,\n                e: e\n              }));\n\n            case 2:\n              res = _context24.sent;\n              NodeApi.throwOnError(res);\n              return _context24.abrupt(\"return\", res.data.data.response);\n\n            case 5:\n            case \"end\":\n              return _context24.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"linkAppId\",\n    value: function linkAppId(sig, appId) {\n      var res;\n      return _regeneratorRuntime.async(function linkAppId$(_context25) {\n        while (1) {\n          switch (_context25.prev = _context25.next) {\n            case 0:\n              console.log(\"/verifications/\" + sig.app + \"/\" + appId);\n              console.log({\n                sig: sig.sig,\n                uid: sig.uid,\n                verification: sig.verification,\n                roundedTimestamp: sig.roundedTimestamp\n              });\n              _context25.next = 4;\n              return _regeneratorRuntime.awrap(this.api.post(\"/verifications/\" + sig.app + \"/\" + appId, {\n                sig: sig.sig,\n                uid: sig.uid,\n                verification: sig.verification,\n                roundedTimestamp: sig.roundedTimestamp\n              }));\n\n            case 4:\n              res = _context25.sent;\n              NodeApi.throwOnError(res);\n\n            case 6:\n            case \"end\":\n              return _context25.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"spendSponsorship\",\n    value: function spendSponsorship(appId, appUserId) {\n      var name, timestamp, op, message;\n      return _regeneratorRuntime.async(function spendSponsorship$(_context26) {\n        while (1) {\n          switch (_context26.prev = _context26.next) {\n            case 0:\n              name = 'Spend Sponsorship';\n              timestamp = Date.now();\n              op = {\n                name: name,\n                app: appId,\n                appUserId: appUserId,\n                timestamp: timestamp,\n                v: v\n              };\n              message = stringify(op);\n              return _context26.abrupt(\"return\", this.submitOp(op, message));\n\n            case 5:\n            case \"end\":\n              return _context26.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getSponsorship\",\n    value: function getSponsorship(appUserId) {\n      var res;\n      return _regeneratorRuntime.async(function getSponsorship$(_context27) {\n        while (1) {\n          switch (_context27.prev = _context27.next) {\n            case 0:\n              _context27.next = 2;\n              return _regeneratorRuntime.awrap(this.api.get(\"/sponsorships/\" + appUserId));\n\n            case 2:\n              res = _context27.sent;\n              NodeApi.throwOnError(res);\n              return _context27.abrupt(\"return\", res.data.data);\n\n            case 5:\n            case \"end\":\n              return _context27.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }], [{\n    key: \"checkHash\",\n    value: function checkHash(response, message) {\n      var _response$data$data, _response$data$data2;\n\n      if (((_response$data$data = response.data.data) == null ? void 0 : _response$data$data.hash) !== hash(message)) {\n        throw new Error('Invalid operation hash returned from server');\n      }\n\n      return (_response$data$data2 = response.data.data) == null ? void 0 : _response$data$data2.hash;\n    }\n  }, {\n    key: \"throwOnError\",\n    value: function throwOnError(response) {\n      if (response.ok) {\n        return true;\n      } else if (response.data && response.data.errorNum) {\n        throw new BrightidError(response.data);\n      } else {\n        throw new Error(response.problem);\n      }\n    }\n  }]);\n\n  return NodeApi;\n}();","map":{"version":3,"names":["create","nacl","stringify","strToUint8Array","uInt8ArrayToB64","hash","b64ToUint8Array","BrightidError","v","NodeApi","url","secretKey","id","monitor","baseUrlInternal","api","baseURL","apiUrl","headers","timeout","addMonitor","response","setBaseURL","baseUrl","signedOp","message","post","res","throwOnError","submittedOp","checkHash","postTimestamp","Date","now","undefined","Error","id1","id2","level","timestamp","reportReason","requestProof","fakeUser","requiresCredentials","sk","name","op","console","log","sig1","sign","detached","submitOp","groupId","type","group","sig","dismissee","dismisser","invitee","data","inviter","newAdmin","admin","brightId","params","signingKey","sig2","context","contextId","get","requester","verifications","direction","connections","memberships","invites","opHash","status","state","result","apps","app","roundedTimestamp","verification","public","pub","e","appId","uid","appUserId","ok","errorNum","problem"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/api/brightId.ts"],"sourcesContent":["import { create, ApisauceInstance, ApiResponse, ApiOkResponse } from 'apisauce';\nimport nacl from 'tweetnacl';\nimport stringify from 'fast-json-stable-stringify';\nimport {\n  strToUint8Array,\n  uInt8ArrayToB64,\n  hash,\n  b64ToUint8Array,\n} from '@/utils/encoding';\nimport BrightidError from '@/api/brightidError';\n\nconst v = 6;\n\nexport class NodeApi {\n  api: ApisauceInstance;\n\n  baseUrlInternal: string;\n\n  secretKey: Uint8Array | undefined;\n\n  id: string | undefined;\n\n  constructor({\n    url,\n    secretKey,\n    id,\n    monitor,\n  }: {\n    url: string;\n    secretKey: Uint8Array | undefined;\n    id: string | undefined;\n    monitor?: (response: ApiResponse<any>) => void;\n  }) {\n    this.baseUrlInternal = url;\n    this.id = id;\n    this.secretKey = secretKey;\n    this.api = create({\n      baseURL: this.apiUrl,\n      headers: { 'Cache-Control': 'no-cache' },\n      timeout: 60 * 1000, // one minute timeout for requests\n    });\n    monitor && this.api.addMonitor((response) => monitor(response));\n  }\n\n  get baseUrl() {\n    return this.baseUrlInternal;\n  }\n\n  set baseUrl(url: string) {\n    this.baseUrlInternal = url;\n    this.api.setBaseURL(this.apiUrl);\n  }\n\n  get apiUrl() {\n    return `${this.baseUrl}/brightid/v${v}`;\n  }\n\n  static checkHash(response: ApiOkResponse<OperationPostRes>, message: string) {\n    if (response.data.data?.hash !== hash(message)) {\n      throw new Error('Invalid operation hash returned from server');\n    }\n    return response.data.data?.hash;\n  }\n\n  static throwOnError(response: ApiResponse<NodeApiRes, ErrRes>) {\n    if (response.ok) {\n      return true;\n    } else if (response.data && (response.data as ErrRes).errorNum) {\n      throw new BrightidError(response.data as ErrRes);\n    } else {\n      throw new Error(response.problem);\n    }\n  }\n\n  async submitOp(signedOp: NodeOps, message: string): Promise<SubmittedOp> {\n    // post to node and check result\n    const res = await this.api.post<OperationPostRes, ErrRes>(\n      `/operations`,\n      signedOp,\n    );\n    NodeApi.throwOnError(res);\n\n    // posted successfully. Add hash and postTimestamp to op.\n    const submittedOp = signedOp as SubmittedOp;\n    submittedOp.hash = NodeApi.checkHash(\n      res as ApiOkResponse<OperationPostRes>,\n      message,\n    );\n    submittedOp.postTimestamp = Date.now();\n    return submittedOp;\n  }\n\n  requiresCredentials() {\n    if (this.id === undefined || this.secretKey === undefined) {\n      throw new Error('Missing API credentials');\n    }\n  }\n\n  async addConnection(\n    id1: string,\n    id2: string,\n    level: string,\n    timestamp: number,\n    reportReason?: ReportReason,\n    requestProof?: string,\n    fakeUser?: FakeUser,\n  ) {\n    this.requiresCredentials();\n    const sk = fakeUser ? b64ToUint8Array(fakeUser.secretKey) : this.secretKey;\n\n    const name = 'Connect';\n\n    const op: ConnectOp = {\n      name,\n      id1,\n      id2,\n      level,\n      timestamp,\n      v,\n    };\n\n    if (reportReason) {\n      op.reportReason = reportReason;\n    }\n    if (requestProof) {\n      op.requestProof = requestProof;\n    }\n\n    const message = stringify(op);\n    console.log(`Connect message: ${message}`);\n    op.sig1 = uInt8ArrayToB64(nacl.sign.detached(strToUint8Array(message), sk));\n    return this.submitOp(op, message);\n  }\n\n  async createGroup(groupId: string, url: string, type: string) {\n    this.requiresCredentials();\n    const name = 'Add Group';\n    const timestamp = Date.now();\n\n    const op: AddGroupOp = {\n      name,\n      id: this.id,\n      group: groupId,\n      url,\n      type,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async dismiss(dismissee: string, group: string) {\n    this.requiresCredentials();\n    const name = 'Dismiss';\n    const timestamp = Date.now();\n\n    const op: DismissOp = {\n      name,\n      dismisser: this.id,\n      dismissee,\n      group,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async invite(invitee: string, group: string, data: string) {\n    this.requiresCredentials();\n    const name = 'Invite';\n    const timestamp = Date.now();\n\n    const op: InviteOp = {\n      name,\n      inviter: this.id,\n      invitee,\n      group,\n      data,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async addAdmin(newAdmin: string, group: string) {\n    this.requiresCredentials();\n    const name = 'Add Admin';\n    const timestamp = Date.now();\n\n    const op: AddAdminOp = {\n      name,\n      id: this.id,\n      admin: newAdmin,\n      group,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async deleteGroup(group: string) {\n    this.requiresCredentials();\n    const name = 'Remove Group';\n    const timestamp = Date.now();\n\n    const op: RemoveGroupOp = {\n      name,\n      id: this.id,\n      group,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async joinGroup(group: string, fakeUser?: FakeUser) {\n    this.requiresCredentials();\n    let brightId, secretKey;\n    if (fakeUser) {\n      brightId = fakeUser.id;\n      secretKey = b64ToUint8Array(fakeUser.secretKey);\n    } else {\n      // use real user data\n      brightId = this.id;\n      secretKey = this.secretKey;\n    }\n\n    const name = 'Add Membership';\n    const timestamp = Date.now();\n\n    const op: AddMembershipOp = {\n      name,\n      id: brightId,\n      group,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async leaveGroup(group: string) {\n    this.requiresCredentials();\n    const name = 'Remove Membership';\n    const timestamp = Date.now();\n\n    const op: RemoveMembershipOp = {\n      name,\n      id: this.id,\n      group,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async socialRecovery(params: {\n    id: string;\n    signingKey: string;\n    timestamp: number;\n    id1: string;\n    id2: string;\n    sig1: string;\n    sig2: string;\n  }) {\n    const op: SocialRecoveryOp = {\n      name: 'Social Recovery',\n      id: params.id,\n      signingKey: params.signingKey,\n      timestamp: params.timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.id1 = params.id1;\n    op.id2 = params.id2;\n    op.sig1 = params.sig1;\n    op.sig2 = params.sig2;\n    return this.submitOp(op, message);\n  }\n\n  async addSigningKey(signingKey: string) {\n    this.requiresCredentials();\n    const name = 'Add Signing Key';\n    const timestamp = Date.now();\n\n    const op: AddSigningKeyOp = {\n      name,\n      id: this.id,\n      signingKey,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  async removeSigningKey(signingKey: string) {\n    this.requiresCredentials();\n    const name = 'Remove Signing Key';\n    const timestamp = Date.now();\n\n    const op: RemoveSigningKeyOp = {\n      name,\n      id: this.id,\n      signingKey,\n      timestamp,\n      v,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    return this.submitOp(op, message);\n  }\n\n  /*\n    The \"Link Context\" operation is only available on api version 5.\n    -> create local ApiSauceInstance with baseUrl .../v5 instead of default .../v6\n   */\n  async linkContextId(context: string, contextId: string) {\n    this.requiresCredentials();\n    const name = 'Link ContextId';\n    const timestamp = Date.now();\n\n    const op: LinkContextIdOp = {\n      name,\n      id: this.id,\n      context,\n      contextId,\n      timestamp,\n      v: 5,\n    };\n\n    const message = stringify(op);\n    op.sig = uInt8ArrayToB64(\n      nacl.sign.detached(strToUint8Array(message), this.secretKey),\n    );\n    const api = create({\n      baseURL: `${this.baseUrl}/brightid/v5`,\n      headers: { 'Cache-Control': 'no-cache' },\n    });\n    const res = await api.post<OperationPostRes, ErrRes>(`/operations`, op);\n    NodeApi.throwOnError(res);\n    const submittedOp = op as SubmittedOp;\n    submittedOp.hash = NodeApi.checkHash(\n      res as ApiOkResponse<OperationPostRes>,\n      message,\n    );\n    submittedOp.postTimestamp = Date.now();\n    return submittedOp;\n  }\n\n  async getGroup(id: string) {\n    const res = await this.api.get<GroupRes, ErrRes>(`/groups/${id}`);\n    NodeApi.throwOnError(res);\n    return (res.data as GroupRes).data;\n  }\n\n  async getProfile(id: string) {\n    const requester = this.id;\n    const url = `/users/${id}/profile/${requester || ''}`;\n    const res = await this.api.get<UserProfileRes, ErrRes>(url);\n    NodeApi.throwOnError(res);\n    return (res.data as UserProfileRes).data;\n  }\n\n  async getVerifications(id: string) {\n    const res = await this.api.get<UserVerificationsRes, ErrRes>(\n      `/users/${id}/verifications`,\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as UserVerificationsRes).data.verifications;\n  }\n\n  async getConnections(id: string, direction: 'inbound' | 'outbound') {\n    const res = await this.api.get<UserConnectionsRes, ErrRes>(\n      `/users/${id}/connections/${direction}`,\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as UserConnectionsRes).data?.connections;\n  }\n\n  async getMemberships(id: string) {\n    const res = await this.api.get<UserMembershipsRes, ErrRes>(\n      `/users/${id}/memberships`,\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as UserMembershipsRes).data?.memberships;\n  }\n\n  async getInvites(id: string) {\n    const res = await this.api.get<UserInvitesRes, ErrRes>(\n      `/users/${id}/invites`,\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as UserInvitesRes).data?.invites;\n  }\n\n  async getOperationState(opHash: string) {\n    const res = await this.api.get<OperationRes, ErrRes>(\n      `/operations/${opHash}`,\n    );\n    if (res.status === 404) {\n      // operation is not existing on server. Don't throw an error, as a client might try to check\n      // operations sent by other clients without knowing if they have been submitted already.\n      return {\n        state: 'unknown',\n        result: '',\n      };\n    }\n    NodeApi.throwOnError(res);\n    return (res.data as OperationRes).data;\n  }\n\n  async getApps() {\n    const res = await this.api.get<AppsRes, ErrRes>(`/apps`);\n    NodeApi.throwOnError(res);\n    return (res.data as AppsRes).data?.apps;\n  }\n\n  async getState() {\n    const res = await this.api.get<StateRes, ErrRes>(`/state`);\n    NodeApi.throwOnError(res);\n    return (res.data as StateRes).data;\n  }\n\n  async getPublic(app: string, roundedTimestamp: number, verification: string) {\n    console.log(15, app, roundedTimestamp, verification);\n    const res = await this.api.get<PublicRes, ErrRes>(\n      `/verifications/blinded/public`,\n      { app, roundedTimestamp, verification },\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as PublicRes).data.public;\n  }\n\n  async getBlindedSig(pub: string, sig: string, e: string) {\n    const res = await this.api.get<BlindSigRes, ErrRes>(\n      `/verifications/blinded/sig/${this.id}`,\n      { public: pub, sig, e },\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as BlindSigRes).data.response;\n  }\n\n  async linkAppId(sig: SigInfo, appId: string) {\n    console.log(`/verifications/${sig.app}/${appId}`);\n    console.log({\n      sig: sig.sig,\n      uid: sig.uid,\n      verification: sig.verification,\n      roundedTimestamp: sig.roundedTimestamp,\n    });\n    const res = await this.api.post<OperationPostRes, ErrRes>(\n      `/verifications/${sig.app}/${appId}`,\n      {\n        sig: sig.sig,\n        uid: sig.uid,\n        verification: sig.verification,\n        roundedTimestamp: sig.roundedTimestamp,\n      },\n    );\n\n    NodeApi.throwOnError(res);\n  }\n\n  async spendSponsorship(appId: string, appUserId: string) {\n    const name = 'Spend Sponsorship';\n    const timestamp = Date.now();\n    const op: SpendSponsorshipOp = {\n      name,\n      app: appId,\n      appUserId,\n      timestamp,\n      v,\n    };\n    const message = stringify(op);\n    return this.submitOp(op, message);\n  }\n\n  async getSponsorship(appUserId: string) {\n    const res = await this.api.get<SponsorshipRes, ErrRes>(\n      `/sponsorships/${appUserId}`,\n    );\n    NodeApi.throwOnError(res);\n    return (res.data as SponsorshipRes).data;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}