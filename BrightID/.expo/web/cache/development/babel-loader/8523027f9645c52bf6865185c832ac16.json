{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { AccountSteps } from \"./RestoreScreen\";\nimport { fontSize } from \"../../../theme/fonts\";\nimport { BLACK, DARKER_GREY, GREEN, ORANGE, RED } from \"../../../theme/colors\";\nimport { DEVICE_LARGE } from \"../../../utils/deviceConstants\";\nimport Spinner from 'react-native-spinkit';\nimport IonIcons from \"@expo/vector-icons/Ionicons\";\nimport { useTranslation } from 'react-i18next';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var RecoverAccount = function RecoverAccount(_ref) {\n  var currentStep = _ref.currentStep,\n      errorMessage = _ref.errorMessage,\n      recoveredConnections = _ref.recoveredConnections,\n      recoveredGroups = _ref.recoveredGroups;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      stateDescription = _useState2[0],\n      setStateDescription = _useState2[1];\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      iconData = _useState4[0],\n      setIconData = _useState4[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  useEffect(function () {\n    switch (currentStep) {\n      case AccountSteps.WAITING_DOWNLOAD:\n      case AccountSteps.DOWNLOAD_COMPLETE:\n        setIconData(undefined);\n        setStateDescription(t('recovery.steps.downloading', 'Downloading data from recovery connections...'));\n        break;\n\n      case AccountSteps.WAITING_OPERATION:\n      case AccountSteps.OPERATION_APPLIED:\n        setIconData(undefined);\n        setStateDescription(t('recovery.steps.recovering', 'Recovering account...'));\n        break;\n\n      case AccountSteps.COMPLETE:\n        setIconData({\n          color: GREEN,\n          name: 'checkmark-circle-outline'\n        });\n        setStateDescription(t('recovery.steps.complete', 'Account recovery complete'));\n        break;\n\n      case AccountSteps.ERROR:\n        setIconData({\n          color: RED,\n          name: 'alert-circle-outline'\n        });\n        setStateDescription(t('recovery.steps.error', 'Account recovery failed'));\n        break;\n\n      default:\n        setStateDescription(\"Unhandled state \" + AccountSteps[currentStep]);\n        break;\n    }\n  }, [currentStep, t]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.headerTextContainer,\n      children: [_jsx(Text, {\n        style: styles.headerText,\n        children: t('recovery.header.text', {\n          defaultValue: 'Part 1: Recover account'\n        })\n      }), _jsx(Text, {\n        style: styles.headerInfoText,\n        children: t('recovery.info', {\n          defaultValue: 'This step will recover your BrightID on this device. Names and photos of connections in common with your recovery connections will be restored.'\n        })\n      })]\n    }), _jsxs(View, {\n      style: styles.statusContainer,\n      children: [_jsx(View, {\n        children: iconData ? _jsx(IonIcons, {\n          style: {\n            alignSelf: 'center'\n          },\n          size: DEVICE_LARGE ? 64 : 44,\n          name: iconData.name,\n          color: iconData.color\n        }) : _jsx(Spinner, {\n          isVisible: true,\n          size: DEVICE_LARGE ? 64 : 44,\n          type: \"Wave\",\n          color: ORANGE\n        })\n      }), _jsxs(View, {\n        style: styles.infoTextContainer,\n        children: [_jsx(Text, {\n          style: styles.infoText,\n          children: stateDescription\n        }), _jsx(Text, {\n          style: styles.infoSubText,\n          children: currentStep === AccountSteps.ERROR ? errorMessage : t('recovery.state', {\n            defaultValue: 'Recovered {{recoveredConnections}} connections, {{recoveredGroups}} groups',\n            recoveredConnections: recoveredConnections,\n            recoveredGroups: recoveredGroups\n          })\n        })]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%'\n  },\n  headerTextContainer: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  headerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[20],\n    color: BLACK\n  },\n  headerInfoText: {\n    fontFamily: 'Poppins-Regular',\n    textAlign: 'center',\n    color: DARKER_GREY,\n    fontSize: fontSize[12],\n    maxWidth: '90%'\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginLeft: 20,\n    alignItems: 'center'\n  },\n  infoTextContainer: {\n    flex: 1,\n    marginLeft: 10\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    color: BLACK\n  },\n  infoSubText: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[10],\n    color: BLACK\n  }\n});","map":{"version":3,"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/RecoveryFlow/RecoverAccount.tsx"],"names":["RecoverAccount","currentStep","errorMessage","recoveredConnections","recoveredGroups","stateDescription","setStateDescription","useState","iconData","setIconData","t","useTranslation","useEffect","AccountSteps","color","name","styles","defaultValue","alignSelf","DEVICE_LARGE","StyleSheet","container","justifyContent","alignItems","width","headerTextContainer","headerText","fontFamily","fontSize","headerInfoText","textAlign","maxWidth","statusContainer","flexDirection","marginTop","marginLeft","infoTextContainer","flex","infoText","infoSubText"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport { AccountSteps } from '@/components/Onboarding/RecoveryFlow/RestoreScreen';\nimport { fontSize } from '@/theme/fonts';\nimport { BLACK, DARKER_GREY, GREEN, ORANGE, RED } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport Spinner from 'react-native-spinkit';\nimport IonIcons from 'react-native-vector-icons/Ionicons';\nimport { useTranslation } from 'react-i18next';\n\n/* Component to track account recovery */\ntype RecoverAccountParams = {\n  currentStep: AccountSteps;\n  errorMessage: string;\n  recoveredGroups: number;\n  recoveredConnections: number;\n};\nexport const RecoverAccount = ({\n  currentStep,\n  errorMessage,\n  recoveredConnections,\n  recoveredGroups,\n}: RecoverAccountParams) => {\n  const [stateDescription, setStateDescription] = useState('');\n  const [iconData, setIconData] = useState<{ color: string; name: string }>(\n    undefined,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    switch (currentStep) {\n      case AccountSteps.WAITING_DOWNLOAD:\n      case AccountSteps.DOWNLOAD_COMPLETE:\n        setIconData(undefined);\n        setStateDescription(\n          t(\n            'recovery.steps.downloading',\n            'Downloading data from recovery connections...',\n          ),\n        );\n        break;\n      case AccountSteps.WAITING_OPERATION:\n      case AccountSteps.OPERATION_APPLIED:\n        setIconData(undefined);\n        setStateDescription(\n          t('recovery.steps.recovering', 'Recovering account...'),\n        );\n        break;\n      case AccountSteps.COMPLETE:\n        setIconData({ color: GREEN, name: 'checkmark-circle-outline' });\n        setStateDescription(\n          t('recovery.steps.complete', 'Account recovery complete'),\n        );\n        break;\n      case AccountSteps.ERROR:\n        setIconData({ color: RED, name: 'alert-circle-outline' });\n        setStateDescription(\n          t('recovery.steps.error', 'Account recovery failed'),\n        );\n        break;\n      default:\n        setStateDescription(`Unhandled state ${AccountSteps[currentStep]}`);\n        break;\n    }\n  }, [currentStep, t]);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.headerTextContainer}>\n        <Text style={styles.headerText}>\n          {t('recovery.header.text', {\n            defaultValue: 'Part 1: Recover account',\n          })}\n        </Text>\n\n        <Text style={styles.headerInfoText}>\n          {t('recovery.info', {\n            defaultValue:\n              'This step will recover your BrightID on this device. Names and photos of connections in common with your recovery connections will be restored.',\n          })}\n        </Text>\n      </View>\n      <View style={styles.statusContainer}>\n        <View>\n          {iconData ? (\n            <IonIcons\n              style={{ alignSelf: 'center' }}\n              size={DEVICE_LARGE ? 64 : 44}\n              name={iconData.name}\n              color={iconData.color}\n            />\n          ) : (\n            <Spinner\n              isVisible={true}\n              size={DEVICE_LARGE ? 64 : 44}\n              type=\"Wave\"\n              color={ORANGE}\n            />\n          )}\n        </View>\n        <View style={styles.infoTextContainer}>\n          <Text style={styles.infoText}>{stateDescription}</Text>\n          <Text style={styles.infoSubText}>\n            {currentStep === AccountSteps.ERROR\n              ? errorMessage\n              : t('recovery.state', {\n                  defaultValue:\n                    'Recovered {{recoveredConnections}} connections, {{recoveredGroups}} groups',\n                  recoveredConnections,\n                  recoveredGroups,\n                })}\n          </Text>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  headerTextContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[20],\n    color: BLACK,\n  },\n  headerInfoText: {\n    fontFamily: 'Poppins-Regular',\n    textAlign: 'center',\n    color: DARKER_GREY,\n    fontSize: fontSize[12],\n    maxWidth: '90%',\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginLeft: 20,\n    alignItems: 'center',\n  },\n  infoTextContainer: {\n    flex: 1,\n    marginLeft: 10,\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    color: BLACK,\n  },\n  infoSubText: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[10],\n    color: BLACK,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}