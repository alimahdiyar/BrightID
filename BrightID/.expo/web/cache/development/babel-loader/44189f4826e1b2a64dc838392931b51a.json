{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useTranslation } from 'react-i18next';\nimport Spinner from 'react-native-spinkit';\nimport IonIcons from \"@expo/vector-icons/Ionicons\";\nimport { BackupSteps } from \"./RestoreScreen\";\nimport { BLACK, DARKER_GREY, GREEN, ORANGE, RED, WHITE } from \"../../../theme/colors\";\nimport { fontSize } from \"../../../theme/fonts\";\nimport { DEVICE_LARGE } from \"../../../utils/deviceConstants\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var RestoreBackup = function RestoreBackup(_ref) {\n  var currentStep = _ref.currentStep,\n      doRestore = _ref.doRestore,\n      doSkip = _ref.doSkip,\n      password = _ref.password,\n      setPassword = _ref.setPassword,\n      totalItems = _ref.totalItems,\n      currentItem = _ref.currentItem;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      stateDescription = _useState2[0],\n      setStateDescription = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showPasswordInput = _useState4[0],\n      setShowPasswordInput = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      iconData = _useState6[0],\n      setIconData = _useState6[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  useEffect(function () {\n    switch (currentStep) {\n      case BackupSteps.WAITING_ACCOUNT:\n        setIconData(undefined);\n        setStateDescription(t('restore.steps.waitingAccount', 'Waiting for account recovery'));\n        setShowPasswordInput(false);\n        break;\n\n      case BackupSteps.WAITING_PASSWORD:\n        setIconData({\n          color: DARKER_GREY,\n          name: 'information-circle-outline'\n        });\n        setStateDescription(t('restore.steps.waitingPassword', 'Enter password or skip'));\n        setShowPasswordInput(true);\n        break;\n\n      case BackupSteps.RESTORING_DATA:\n        setIconData(undefined);\n\n        if (totalItems) {\n          setStateDescription(t('restore.steps.restoringProgress', 'Restoring item {{currentItem}} of {{totalItems}}', {\n            totalItems: totalItems,\n            currentItem: currentItem\n          }));\n        } else {\n          setStateDescription(t('restore.steps.restoring', 'Restoring data ...'));\n        }\n\n        setShowPasswordInput(false);\n        break;\n\n      case BackupSteps.COMPLETE:\n        setIconData({\n          color: GREEN,\n          name: 'checkmark-circle-outline'\n        });\n        setStateDescription(t('restore.steps.complete', 'Restore complete'));\n        setShowPasswordInput(false);\n        break;\n\n      case BackupSteps.ERROR:\n        setIconData({\n          color: RED,\n          name: 'alert-circle-outline'\n        });\n        setStateDescription(t('restore.steps.error', 'Restore failed. Wrong password?'));\n        setShowPasswordInput(true);\n        break;\n\n      case BackupSteps.SKIPPED:\n        setIconData({\n          color: DARKER_GREY,\n          name: 'checkmark-circle-outline'\n        });\n        setStateDescription(t('restore.steps.skipped', 'Restore skipped'));\n        setShowPasswordInput(false);\n        break;\n\n      default:\n        setIconData({\n          color: RED,\n          name: 'alert-circle-outline'\n        });\n        setStateDescription(\"Unhandled state \" + BackupSteps[currentStep]);\n        break;\n    }\n  }, [currentItem, currentStep, t, totalItems]);\n  var submitDisabled = password.length < 1;\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.headerTextContainer,\n      children: [_jsx(Text, {\n        style: styles.headerText,\n        children: t('restore.header.text', {\n          defaultValue: 'Part 2: Restore backup (optional)'\n        })\n      }), _jsx(Text, {\n        style: styles.headerInfoText,\n        children: t('restore.info', {\n          defaultValue: 'With your backup password you can restore names and photos of all your connections and groups.'\n        })\n      })]\n    }), _jsxs(View, {\n      style: styles.statusContainer,\n      children: [_jsx(View, {\n        children: iconData ? _jsx(IonIcons, {\n          style: {\n            alignSelf: 'center'\n          },\n          size: DEVICE_LARGE ? 64 : 44,\n          name: iconData.name,\n          color: iconData.color\n        }) : _jsx(Spinner, {\n          isVisible: true,\n          size: DEVICE_LARGE ? 64 : 44,\n          type: \"Wave\",\n          color: ORANGE\n        })\n      }), _jsx(View, {\n        style: styles.infoTextContainer,\n        children: _jsx(Text, {\n          style: styles.infoText,\n          children: stateDescription\n        })\n      })]\n    }), showPasswordInput && _jsxs(View, {\n      style: styles.actionContainer,\n      children: [_jsx(View, {\n        style: styles.textInputContainer,\n        children: _jsx(TextInput, {\n          onChangeText: setPassword,\n          value: password,\n          placeholder: t('restore.password.placeholder', 'Type your password'),\n          placeholderTextColor: DARKER_GREY,\n          style: styles.textInput,\n          autoCorrect: false,\n          textContentType: \"password\",\n          autoComplete: \"password\",\n          underlineColorAndroid: \"transparent\",\n          secureTextEntry: true\n        })\n      }), _jsxs(View, {\n        style: styles.buttonContainer,\n        children: [_jsx(TouchableOpacity, {\n          style: [styles.submitButton, submitDisabled ? {\n            opacity: 0.5\n          } : {}],\n          onPress: doRestore,\n          accessibilityLabel: \"submit\",\n          disabled: submitDisabled,\n          children: _jsx(Text, {\n            style: styles.submitText,\n            children: t('restore.password.submit', 'Restore')\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.skipButton,\n          onPress: doSkip,\n          accessibilityLabel: \"skip\",\n          children: _jsx(Text, {\n            style: styles.skipText,\n            children: t('restore.password.skip', 'Skip')\n          })\n        })]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%'\n  },\n  headerTextContainer: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  headerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[20],\n    color: BLACK\n  },\n  headerInfoText: {\n    fontFamily: 'Poppins-Regular',\n    textAlign: 'center',\n    color: DARKER_GREY,\n    fontSize: fontSize[12],\n    maxWidth: '90%',\n    marginTop: 5\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginLeft: 20,\n    alignItems: 'center'\n  },\n  infoTextContainer: {\n    flex: 1,\n    marginLeft: 10\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    color: BLACK\n  },\n  actionContainer: {\n    alignItems: 'center',\n    justifyContent: 'flex-start'\n  },\n  textInputContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%'\n  },\n  textInput: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[14],\n    color: DARKER_GREY,\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: DARKER_GREY,\n    width: '90%',\n    textAlign: 'center'\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: DEVICE_LARGE ? 20 : 16\n  },\n  submitButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: DEVICE_LARGE ? 120 : 100,\n    height: DEVICE_LARGE ? 46 : 40,\n    borderRadius: 60,\n    backgroundColor: ORANGE,\n    shadowColor: BLACK,\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    shadowRadius: 4\n  },\n  submitText: {\n    fontFamily: 'Poppins-Bold',\n    color: WHITE,\n    fontSize: fontSize[16]\n  },\n  skipButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderColor: ORANGE,\n    borderWidth: 1,\n    borderRadius: 60,\n    width: DEVICE_LARGE ? 120 : 100,\n    height: DEVICE_LARGE ? 46 : 40,\n    marginLeft: DEVICE_LARGE ? 20 : 16\n  },\n  skipText: {\n    fontFamily: 'Poppins-Medium',\n    color: ORANGE,\n    fontSize: fontSize[16]\n  }\n});","map":{"version":3,"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/RecoveryFlow/RestoreBackup.tsx"],"names":["RestoreBackup","currentStep","doRestore","doSkip","password","setPassword","totalItems","currentItem","stateDescription","setStateDescription","useState","showPasswordInput","setShowPasswordInput","iconData","setIconData","t","useTranslation","useEffect","BackupSteps","color","name","submitDisabled","styles","defaultValue","alignSelf","DEVICE_LARGE","opacity","StyleSheet","container","justifyContent","alignItems","width","headerTextContainer","headerText","fontFamily","fontSize","headerInfoText","textAlign","maxWidth","marginTop","statusContainer","flexDirection","marginLeft","infoTextContainer","flex","infoText","actionContainer","textInputContainer","textInput","borderBottomWidth","borderBottomColor","buttonContainer","submitButton","height","borderRadius","backgroundColor","shadowColor","shadowOffset","shadowRadius","submitText","skipButton","borderColor","borderWidth","skipText"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  StyleSheet,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport Spinner from 'react-native-spinkit';\nimport IonIcons from 'react-native-vector-icons/Ionicons';\nimport { BackupSteps } from '@/components/Onboarding/RecoveryFlow/RestoreScreen';\nimport { BLACK, DARKER_GREY, GREEN, ORANGE, RED, WHITE } from '@/theme/colors';\nimport { fontSize } from '@/theme/fonts';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\n\n/* Component to track backup restore */\ntype RestoreBackupParams = {\n  currentStep: BackupSteps;\n  password: string;\n  setPassword: (pass: string) => void;\n  doRestore: () => void;\n  doSkip: () => void;\n  totalItems: number;\n  currentItem: number;\n};\nexport const RestoreBackup = ({\n  currentStep,\n  doRestore,\n  doSkip,\n  password,\n  setPassword,\n  totalItems,\n  currentItem,\n}: RestoreBackupParams) => {\n  const [stateDescription, setStateDescription] = useState('');\n  const [showPasswordInput, setShowPasswordInput] = useState(true);\n  const [iconData, setIconData] =\n    useState<{ color: string; name: string }>(undefined);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    switch (currentStep) {\n      case BackupSteps.WAITING_ACCOUNT:\n        setIconData(undefined);\n        setStateDescription(\n          t('restore.steps.waitingAccount', 'Waiting for account recovery'),\n        );\n        setShowPasswordInput(false);\n        break;\n      case BackupSteps.WAITING_PASSWORD:\n        setIconData({ color: DARKER_GREY, name: 'information-circle-outline' });\n        setStateDescription(\n          t('restore.steps.waitingPassword', 'Enter password or skip'),\n        );\n        setShowPasswordInput(true);\n        break;\n      case BackupSteps.RESTORING_DATA:\n        setIconData(undefined);\n        if (totalItems) {\n          setStateDescription(\n            t(\n              'restore.steps.restoringProgress',\n              'Restoring item {{currentItem}} of {{totalItems}}',\n              { totalItems, currentItem },\n            ),\n          );\n        } else {\n          setStateDescription(\n            t('restore.steps.restoring', 'Restoring data ...'),\n          );\n        }\n        setShowPasswordInput(false);\n        break;\n      case BackupSteps.COMPLETE:\n        setIconData({ color: GREEN, name: 'checkmark-circle-outline' });\n        setStateDescription(t('restore.steps.complete', 'Restore complete'));\n        setShowPasswordInput(false);\n        break;\n      case BackupSteps.ERROR:\n        setIconData({ color: RED, name: 'alert-circle-outline' });\n        setStateDescription(\n          t('restore.steps.error', 'Restore failed. Wrong password?'),\n        );\n        setShowPasswordInput(true);\n        break;\n      case BackupSteps.SKIPPED:\n        setIconData({ color: DARKER_GREY, name: 'checkmark-circle-outline' });\n        setStateDescription(t('restore.steps.skipped', 'Restore skipped'));\n        setShowPasswordInput(false);\n        break;\n      default:\n        setIconData({ color: RED, name: 'alert-circle-outline' });\n        setStateDescription(`Unhandled state ${BackupSteps[currentStep]}`);\n        break;\n    }\n  }, [currentItem, currentStep, t, totalItems]);\n\n  const submitDisabled = password.length < 1;\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.headerTextContainer}>\n        <Text style={styles.headerText}>\n          {t('restore.header.text', {\n            defaultValue: 'Part 2: Restore backup (optional)',\n          })}\n        </Text>\n        <Text style={styles.headerInfoText}>\n          {t('restore.info', {\n            defaultValue:\n              'With your backup password you can restore names and photos of all your connections and groups.',\n          })}\n        </Text>\n      </View>\n      <View style={styles.statusContainer}>\n        <View>\n          {iconData ? (\n            <IonIcons\n              style={{ alignSelf: 'center' }}\n              size={DEVICE_LARGE ? 64 : 44}\n              name={iconData.name}\n              color={iconData.color}\n            />\n          ) : (\n            <Spinner\n              isVisible={true}\n              size={DEVICE_LARGE ? 64 : 44}\n              type=\"Wave\"\n              color={ORANGE}\n            />\n          )}\n        </View>\n        <View style={styles.infoTextContainer}>\n          <Text style={styles.infoText}>{stateDescription}</Text>\n        </View>\n      </View>\n      {showPasswordInput && (\n        <View style={styles.actionContainer}>\n          <View style={styles.textInputContainer}>\n            <TextInput\n              onChangeText={setPassword}\n              value={password}\n              placeholder={t(\n                'restore.password.placeholder',\n                'Type your password',\n              )}\n              placeholderTextColor={DARKER_GREY}\n              style={styles.textInput}\n              autoCorrect={false}\n              textContentType=\"password\"\n              autoComplete=\"password\"\n              underlineColorAndroid=\"transparent\"\n              secureTextEntry={true}\n            />\n          </View>\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[\n                styles.submitButton,\n                submitDisabled ? { opacity: 0.5 } : {},\n              ]}\n              onPress={doRestore}\n              accessibilityLabel=\"submit\"\n              disabled={submitDisabled}\n            >\n              <Text style={styles.submitText}>\n                {t('restore.password.submit', 'Restore')}\n              </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={styles.skipButton}\n              onPress={doSkip}\n              accessibilityLabel=\"skip\"\n            >\n              <Text style={styles.skipText}>\n                {t('restore.password.skip', 'Skip')}\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  headerTextContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[20],\n    color: BLACK,\n  },\n  headerInfoText: {\n    fontFamily: 'Poppins-Regular',\n    textAlign: 'center',\n    color: DARKER_GREY,\n    fontSize: fontSize[12],\n    maxWidth: '90%',\n    marginTop: 5,\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginLeft: 20,\n    alignItems: 'center',\n  },\n  infoTextContainer: {\n    flex: 1,\n    marginLeft: 10,\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    color: BLACK,\n  },\n  actionContainer: {\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  textInputContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  textInput: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[14],\n    color: DARKER_GREY,\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: DARKER_GREY,\n    width: '90%',\n    textAlign: 'center',\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: DEVICE_LARGE ? 20 : 16,\n  },\n  submitButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: DEVICE_LARGE ? 120 : 100,\n    height: DEVICE_LARGE ? 46 : 40,\n    borderRadius: 60,\n    backgroundColor: ORANGE,\n    shadowColor: BLACK,\n    shadowOffset: { width: 0, height: 4 },\n    shadowRadius: 4,\n  },\n  submitText: {\n    fontFamily: 'Poppins-Bold',\n    color: WHITE,\n    fontSize: fontSize[16],\n  },\n  skipButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderColor: ORANGE,\n    borderWidth: 1,\n    borderRadius: 60,\n    width: DEVICE_LARGE ? 120 : 100,\n    height: DEVICE_LARGE ? 46 : 40,\n    marginLeft: DEVICE_LARGE ? 20 : 16,\n  },\n  skipText: {\n    fontFamily: 'Poppins-Medium',\n    color: ORANGE,\n    fontSize: fontSize[16],\n  },\n});\n"]},"metadata":{},"sourceType":"module"}