{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport InteractionManager from \"react-native-web/dist/exports/InteractionManager\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from \"../../../store\";\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from \"../../../theme/fonts\";\nimport { WHITE, ORANGE } from \"../../../theme/colors\";\nimport { DEVICE_LARGE } from \"../../../utils/deviceConstants\";\nimport { backupAppData } from \"../RecoveryFlow/thunks/backupThunks\";\nimport { setBackupCompleted } from \"../../../reducer/userSlice\";\nimport DetoxEnabled from \"../../../utils/Detox\";\nimport { saveId } from \"./thunks\";\nimport Congratulations from \"../../Icons/Congratulations\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar TIMEOUT = 1500;\nexport var SuccessScreen = function SuccessScreen() {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n  var password = useSelector(function (state) {\n    return state.user.password;\n  });\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      endTime = _useState4[0],\n      setEndTime = _useState4[1];\n\n  useFocusEffect(useCallback(function () {\n    var intervalID = setInterval(function () {\n      setCurrentTime(Date.now());\n    }, 300);\n    return function () {\n      clearInterval(intervalID);\n    };\n  }, []));\n  useEffect(function () {\n    if (endTime && currentTime && currentTime >= endTime) {\n      dispatch(saveId());\n\n      if (password) {\n        console.log(\"Starting initial backup\");\n        dispatch(backupAppData()).then(function () {\n          dispatch(setBackupCompleted(true));\n        });\n      }\n\n      return function () {\n        if (!DetoxEnabled) {\n          InteractionManager.runAfterInteractions(function () {\n            navigation.navigate('ViewPasswordWalkthrough');\n          });\n        }\n      };\n    }\n  }, [currentTime, endTime, dispatch, navigation, password]);\n  useFocusEffect(useCallback(function () {\n    setEndTime(Date.now() + TIMEOUT);\n  }, []));\n  return _jsxs(_Fragment, {\n    children: [_jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsx(StatusBar, {\n        barStyle: \"dark-content\",\n        backgroundColor: WHITE,\n        animated: true\n      }), _jsx(View, {\n        style: styles.header,\n        children: _jsx(Image, {\n          source: require(\"../../../static/brightid-final.png\"),\n          accessible: true,\n          accessibilityLabel: \"Home Header Logo\",\n          resizeMode: \"contain\",\n          style: styles.logo\n        })\n      }), _jsx(View, {\n        style: styles.center,\n        children: _jsxs(View, {\n          style: styles.imageContainer,\n          children: [_jsx(View, {\n            style: styles.phoneContainer,\n            children: _jsx(Image, {\n              source: require(\"../../../static/brightid-phone.png\"),\n              accessible: true,\n              accessibilityLabel: \"Home Header Logo\",\n              resizeMode: \"contain\",\n              style: styles.phone\n            })\n          }), _jsx(Congratulations, {\n            width: 190,\n            height: 230\n          })]\n        })\n      }), _jsx(Text, {\n        style: styles.registerText,\n        children: t('onboarding.text.congratulations')\n      })]\n    }), _jsx(View, {\n      style: styles.orangeBottom\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    alignItems: 'center',\n    flexDirection: 'column',\n    borderBottomLeftRadius: 58,\n    borderBottomRightRadius: 58,\n    marginBottom: DEVICE_LARGE ? 35 : 20,\n    zIndex: 2,\n    overflow: 'hidden'\n  },\n  orangeBottom: {\n    backgroundColor: ORANGE,\n    width: '100%',\n    height: 100,\n    zIndex: 1,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  header: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: '15%'\n  },\n  logo: {\n    maxWidth: '40%',\n    maxHeight: 90\n  },\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  imageContainer: {\n    width: 190,\n    height: 230\n  },\n  phoneContainer: {\n    position: 'absolute',\n    top: 25,\n    left: 25\n  },\n  phone: {\n    width: 140,\n    height: 180\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24,\n    marginBottom: DEVICE_LARGE ? 50 : 45\n  }\n});\nexport default SuccessScreen;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useTranslation","useDispatch","useSelector","useFocusEffect","useNavigation","fontSize","WHITE","ORANGE","DEVICE_LARGE","backupAppData","setBackupCompleted","DetoxEnabled","saveId","Congratulations","TIMEOUT","SuccessScreen","t","dispatch","navigation","password","state","user","currentTime","setCurrentTime","endTime","setEndTime","intervalID","setInterval","Date","now","clearInterval","console","log","then","InteractionManager","runAfterInteractions","navigate","styles","container","header","require","logo","center","imageContainer","phoneContainer","phone","registerText","orangeBottom","StyleSheet","create","flex","backgroundColor","alignItems","flexDirection","borderBottomLeftRadius","borderBottomRightRadius","marginBottom","zIndex","overflow","width","height","position","bottom","left","right","justifyContent","marginTop","maxWidth","maxHeight","top","fontFamily","textAlign","lineHeight"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/SignUpFlow/SuccessScreen.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  Image,\n  InteractionManager,\n  SafeAreaView,\n  StatusBar,\n  StyleSheet,\n  Text,\n  View,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from '@/store';\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from '@/theme/fonts';\nimport { WHITE, ORANGE } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport { backupAppData } from '@/components/Onboarding/RecoveryFlow/thunks/backupThunks';\nimport { setBackupCompleted } from '@/reducer/userSlice';\nimport DetoxEnabled from '@/utils/Detox';\nimport { saveId } from './thunks';\nimport Congratulations from '../../Icons/Congratulations';\n/* Onboarding Success Screen */\n\n/* ======================================== */\n\nconst TIMEOUT = 1500;\n\nexport const SuccessScreen = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const password = useSelector((state: State) => state.user.password);\n\n  // this is used instead of a timeout\n  const [currentTime, setCurrentTime] = useState(null);\n  const [endTime, setEndTime] = useState(null);\n\n  /**\n   * update the time until\n   */\n  useFocusEffect(\n    useCallback(() => {\n      const intervalID = setInterval(() => {\n        setCurrentTime(Date.now());\n      }, 300);\n      return () => {\n        clearInterval(intervalID);\n      };\n    }, []),\n  );\n\n  useEffect(() => {\n    if (endTime && currentTime && currentTime >= endTime) {\n      // this  will cause navigation to HomeScreen\n      dispatch(saveId());\n      if (password) {\n        console.log(`Starting initial backup`);\n        dispatch(backupAppData()).then(() => {\n          dispatch(setBackupCompleted(true));\n        });\n      }\n      return () => {\n        // navigate to view password walkthrough\n        if (!DetoxEnabled) {\n          InteractionManager.runAfterInteractions(() => {\n            navigation.navigate('ViewPasswordWalkthrough');\n          });\n        }\n      };\n    }\n  }, [currentTime, endTime, dispatch, navigation, password]);\n\n  useFocusEffect(\n    useCallback(() => {\n      // wait 1.5 seconds before navigating to home page\n      setEndTime(Date.now() + TIMEOUT);\n    }, []),\n  );\n  return (\n    <>\n      <SafeAreaView style={styles.container}>\n        <StatusBar\n          barStyle=\"dark-content\"\n          backgroundColor={WHITE}\n          animated={true}\n        />\n\n        <View style={styles.header}>\n          <Image\n            source={require('@/static/brightid-final.png')}\n            accessible={true}\n            accessibilityLabel=\"Home Header Logo\"\n            resizeMode=\"contain\"\n            style={styles.logo}\n          />\n        </View>\n        <View style={styles.center}>\n          <View style={styles.imageContainer}>\n            <View style={styles.phoneContainer}>\n              <Image\n                source={require('@/static/brightid-phone.png')}\n                accessible={true}\n                accessibilityLabel=\"Home Header Logo\"\n                resizeMode=\"contain\"\n                style={styles.phone}\n              />\n            </View>\n            <Congratulations width={190} height={230} />\n          </View>\n        </View>\n        <Text style={styles.registerText}>\n          {t('onboarding.text.congratulations')}\n        </Text>\n      </SafeAreaView>\n      <View style={styles.orangeBottom} />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    alignItems: 'center',\n    flexDirection: 'column',\n    borderBottomLeftRadius: 58,\n    borderBottomRightRadius: 58,\n    marginBottom: DEVICE_LARGE ? 35 : 20,\n    zIndex: 2,\n    overflow: 'hidden',\n  },\n  orangeBottom: {\n    backgroundColor: ORANGE,\n    width: '100%',\n    height: 100,\n    zIndex: 1,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  header: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: '15%',\n  },\n  logo: {\n    maxWidth: '40%',\n    maxHeight: 90,\n  },\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  imageContainer: {\n    width: 190,\n    height: 230,\n  },\n  phoneContainer: {\n    position: 'absolute',\n    top: 25,\n    left: 25,\n  },\n  phone: {\n    width: 140,\n    height: 180,\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24,\n    marginBottom: DEVICE_LARGE ? 50 : 45,\n  },\n});\n\nexport default SuccessScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}