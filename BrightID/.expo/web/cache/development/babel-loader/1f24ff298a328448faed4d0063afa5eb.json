{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { createSelector, createSlice } from '@reduxjs/toolkit';\nimport { RESET_STORE } from \"../actions/resetStore\";\nimport { INVITE_ACCEPTED, INVITE_REJECTED } from \"../utils/constants\";\nimport { toSearchString } from \"../utils/strings\";\nimport { getGroupName, ids2connections, knownMemberIDs } from \"../utils/groups\";\nimport { compareCreatedDesc } from \"../components/Groups/models/sortingUtility\";\nvar initialState = {\n  groups: [],\n  invites: [],\n  searchParam: '',\n  searchOpen: false\n};\nvar groupsSlice = createSlice({\n  name: 'groups',\n  initialState: initialState,\n  reducers: {\n    createGroup: function createGroup(state, action) {\n      state.groups.push(action.payload);\n    },\n    updateGroup: function updateGroup(state, action) {\n      var group = state.groups.find(function (group) {\n        return group.id === action.payload.id;\n      });\n\n      _extends(group, action.payload);\n    },\n    upsertGroup: function upsertGroup(state, action) {\n      var group = state.groups.find(function (group) {\n        return group.id === action.payload.id;\n      });\n\n      if (group) {\n        _extends(group, action.payload);\n      } else {\n        state.groups.push(action.payload);\n      }\n    },\n    deleteGroup: function deleteGroup(state, action) {\n      state.groups = state.groups.filter(function (group) {\n        return group.id !== action.payload.id;\n      });\n    },\n    setGroups: function setGroups(state, action) {\n      state.groups = action.payload;\n    },\n    updateMemberships: function updateMemberships(state, action) {\n      state.groups.forEach(function (group) {\n        var membership = action.payload.find(function (membership) {\n          return membership.id === group.id;\n        });\n\n        if (!membership && group.state === 'verified') {\n          group.state = 'dismissed';\n        }\n      });\n      action.payload.forEach(function (membership) {\n        var group = state.groups.find(function (group) {\n          return group.id === membership.id;\n        });\n\n        if (group) {\n          group.state = 'verified';\n          group.joined = membership.timestamp;\n        } else {\n          state.groups.push({\n            id: membership.id,\n            state: 'verified',\n            joined: membership.timestamp,\n            members: [],\n            admins: []\n          });\n        }\n      });\n    },\n    joinGroup: function joinGroup(state, action) {\n      var newGroup = action.payload;\n      var existingGroup = state.groups.find(function (group) {\n        return group.id === newGroup.id;\n      });\n\n      if (existingGroup) {\n        _extends(existingGroup, action.payload);\n      } else {\n        state.groups.push(action.payload);\n      }\n    },\n    leaveGroup: function leaveGroup(state, action) {\n      var groupsToLeave = state.groups.filter(function (group) {\n        return group.id === action.payload.id;\n      });\n\n      for (var _iterator = _createForOfIteratorHelperLoose(groupsToLeave), _step; !(_step = _iterator()).done;) {\n        var group = _step.value;\n        group.state = 'dismissed';\n      }\n\n      if (groupsToLeave.length > 1) {\n        var groupsWithoutDuplicates = state.groups.filter(function (group) {\n          return group.id !== action.payload.id;\n        });\n        groupsWithoutDuplicates.push(groupsToLeave[0]);\n        state.groups = groupsWithoutDuplicates;\n      }\n    },\n    dismissFromGroup: function dismissFromGroup(state, action) {\n      var index = state.groups.findIndex(function (group) {\n        return group.id === action.payload.group.id;\n      });\n\n      if (index !== -1) {\n        state.groups[index].members = state.groups[index].members.filter(function (member) {\n          return member !== action.payload.member;\n        });\n      }\n    },\n    addAdmin: function addAdmin(state, action) {\n      var index = state.groups.findIndex(function (group) {\n        return group.id === action.payload.group.id;\n      });\n\n      if (index !== -1) {\n        var member = action.payload.member;\n        var _state$groups$index = state.groups[index],\n            members = _state$groups$index.members,\n            admins = _state$groups$index.admins;\n\n        if (members.includes(member) && !admins.includes(member)) {\n          state.groups[index].admins.push(member);\n        }\n      }\n    },\n    setInvites: function setInvites(state, action) {\n      state.invites = action.payload;\n    },\n    acceptInvite: function acceptInvite(state, action) {\n      var index = state.invites.findIndex(function (invite) {\n        return invite.id === action.payload;\n      });\n      if (index !== -1) state.invites[index].state = INVITE_ACCEPTED;\n    },\n    rejectInvite: function rejectInvite(state, action) {\n      var index = state.invites.findIndex(function (invite) {\n        return invite.id === action.payload;\n      });\n      if (index !== -1) state.invites[index].state = INVITE_REJECTED;\n    },\n    setGroupSearch: function setGroupSearch(state, action) {\n      state.searchParam = action.payload;\n    },\n    setGroupSearchOpen: function setGroupSearchOpen(state, action) {\n      state.searchOpen = action.payload;\n    }\n  },\n  extraReducers: _defineProperty({}, RESET_STORE, function () {\n    return initialState;\n  })\n});\nexport var allGroupsSelector = function allGroupsSelector(state) {\n  return state.groups.groups;\n};\nexport var activeGroupsSelector = function activeGroupsSelector(state) {\n  return state.groups.groups.filter(function (group) {\n    return group.state === 'initiated' || group.state === 'verified';\n  });\n};\nexport var searchParamSelector = function searchParamSelector(state) {\n  return state.groups.searchParam;\n};\nexport var filteredGroupsSelector = createSelector(activeGroupsSelector, searchParamSelector, function (allGroups, searchParam) {\n  var filteredGroups;\n\n  if (searchParam !== '') {\n    var searchString = toSearchString(searchParam);\n    filteredGroups = allGroups.filter(function (group) {\n      if (toSearchString(getGroupName(group)).includes(searchString)) {\n        return true;\n      } else {\n        var allMemberNames = ids2connections(knownMemberIDs(group)).map(function (member) {\n          return toSearchString(member.name);\n        });\n\n        for (var _iterator2 = _createForOfIteratorHelperLoose(allMemberNames), _step2; !(_step2 = _iterator2()).done;) {\n          var name = _step2.value;\n\n          if (name.includes(searchString)) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n    });\n  } else {\n    filteredGroups = allGroups;\n  }\n\n  return filteredGroups.sort(compareCreatedDesc);\n});\nvar _groupsSlice$actions = groupsSlice.actions,\n    createGroup = _groupsSlice$actions.createGroup,\n    updateGroup = _groupsSlice$actions.updateGroup,\n    upsertGroup = _groupsSlice$actions.upsertGroup,\n    deleteGroup = _groupsSlice$actions.deleteGroup,\n    setGroups = _groupsSlice$actions.setGroups,\n    updateMemberships = _groupsSlice$actions.updateMemberships,\n    joinGroup = _groupsSlice$actions.joinGroup,\n    leaveGroup = _groupsSlice$actions.leaveGroup,\n    dismissFromGroup = _groupsSlice$actions.dismissFromGroup,\n    addAdmin = _groupsSlice$actions.addAdmin,\n    setInvites = _groupsSlice$actions.setInvites,\n    rejectInvite = _groupsSlice$actions.rejectInvite,\n    acceptInvite = _groupsSlice$actions.acceptInvite,\n    setGroupSearch = _groupsSlice$actions.setGroupSearch,\n    setGroupSearchOpen = _groupsSlice$actions.setGroupSearchOpen;\nexport { createGroup, updateGroup, upsertGroup, deleteGroup, setGroups, updateMemberships, joinGroup, leaveGroup, dismissFromGroup, addAdmin, setInvites, rejectInvite, acceptInvite, setGroupSearch, setGroupSearchOpen };\nexport default groupsSlice.reducer;","map":{"version":3,"names":["createSelector","createSlice","RESET_STORE","INVITE_ACCEPTED","INVITE_REJECTED","toSearchString","getGroupName","ids2connections","knownMemberIDs","compareCreatedDesc","initialState","groups","invites","searchParam","searchOpen","groupsSlice","name","reducers","createGroup","state","action","push","payload","updateGroup","group","find","id","upsertGroup","deleteGroup","filter","setGroups","updateMemberships","forEach","membership","joined","timestamp","members","admins","joinGroup","newGroup","existingGroup","leaveGroup","groupsToLeave","length","groupsWithoutDuplicates","dismissFromGroup","index","findIndex","member","addAdmin","includes","setInvites","acceptInvite","invite","rejectInvite","setGroupSearch","setGroupSearchOpen","extraReducers","allGroupsSelector","activeGroupsSelector","searchParamSelector","filteredGroupsSelector","allGroups","filteredGroups","searchString","allMemberNames","map","sort","actions","reducer"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/reducer/groupsSlice.ts"],"sourcesContent":["import { createSelector, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RESET_STORE } from '@/actions/resetStore';\nimport { INVITE_ACCEPTED, INVITE_REJECTED } from '@/utils/constants';\nimport { RootState } from '@/store';\nimport { toSearchString } from '@/utils/strings';\nimport { getGroupName, ids2connections, knownMemberIDs } from '@/utils/groups';\nimport { compareCreatedDesc } from '@/components/Groups/models/sortingUtility';\n\n/* ******** INITIAL STATE ************** */\n\nconst initialState: GroupsState = {\n  groups: [],\n  invites: [],\n  searchParam: '',\n  searchOpen: false,\n};\n\nconst groupsSlice = createSlice({\n  name: 'groups',\n  initialState,\n  reducers: {\n    createGroup(state, action: PayloadAction<Group>) {\n      state.groups.push(action.payload);\n    },\n    updateGroup(state, action: PayloadAction<GroupInfo>) {\n      const group = state.groups.find(\n        (group) => group.id === action.payload.id,\n      );\n      Object.assign(group, action.payload);\n    },\n    upsertGroup(state, action: PayloadAction<GroupInfo>) {\n      const group = state.groups.find(\n        (group) => group.id === action.payload.id,\n      );\n      if (group) {\n        Object.assign(group, action.payload);\n      } else {\n        state.groups.push(action.payload);\n      }\n    },\n    deleteGroup(state, action: PayloadAction<Group>) {\n      state.groups = state.groups.filter(\n        (group) => group.id !== action.payload.id,\n      );\n    },\n    setGroups(state, action: PayloadAction<Group[]>) {\n      state.groups = action.payload;\n    },\n    updateMemberships(state, action: PayloadAction<MembershipInfo[]>) {\n      state.groups.forEach((group) => {\n        const membership = action.payload.find(\n          (membership) => membership.id === group.id,\n        );\n        if (!membership && group.state === 'verified') {\n          group.state = 'dismissed';\n        }\n      });\n      action.payload.forEach((membership) => {\n        const group = state.groups.find((group) => group.id === membership.id);\n        if (group) {\n          group.state = 'verified';\n          group.joined = membership.timestamp;\n        } else {\n          state.groups.push({\n            id: membership.id,\n            state: 'verified',\n            joined: membership.timestamp,\n            members: [],\n            admins: [],\n          });\n        }\n      });\n    },\n    joinGroup(state, action: PayloadAction<Group>) {\n      const newGroup = action.payload;\n      const existingGroup = state.groups.find(\n        (group) => group.id === newGroup.id,\n      );\n      if (existingGroup) {\n        // replace existing group with new group\n        Object.assign(existingGroup, action.payload);\n      } else {\n        state.groups.push(action.payload);\n      }\n    },\n    leaveGroup(state, action: PayloadAction<Group>) {\n      // get group to leave (and all potential duplicates, see below)\n      const groupsToLeave = state.groups.filter(\n        (group) => group.id === action.payload.id,\n      );\n      for (const group of groupsToLeave) {\n        group.state = 'dismissed';\n      }\n      if (groupsToLeave.length > 1) {\n        // There was a bug that could result in users having the same group multiple times in state.\n        // To clean this up: When leaving a group we look for duplicates and only keep the first matching group in\n        // state \"dismissed\". The duplicates will be completely removed from state.\n        const groupsWithoutDuplicates = state.groups.filter(\n          (group) => group.id !== action.payload.id,\n        );\n        // only keep first of the duplicates\n        groupsWithoutDuplicates.push(groupsToLeave[0]);\n        state.groups = groupsWithoutDuplicates;\n      }\n    },\n    dismissFromGroup(\n      state,\n      action: PayloadAction<{ member: string; group: Group }>,\n    ) {\n      const index = state.groups.findIndex(\n        (group) => group.id === action.payload.group.id,\n      );\n      if (index !== -1) {\n        state.groups[index].members = state.groups[index].members.filter(\n          (member) => member !== action.payload.member,\n        );\n      }\n    },\n    addAdmin(state, action: PayloadAction<{ member: string; group: Group }>) {\n      const index = state.groups.findIndex(\n        (group) => group.id === action.payload.group.id,\n      );\n      if (index !== -1) {\n        const { member } = action.payload;\n        const { members, admins } = state.groups[index];\n\n        if (members.includes(member) && !admins.includes(member)) {\n          state.groups[index].admins.push(member);\n        }\n      }\n    },\n    setInvites(state, action: PayloadAction<Invite[]>) {\n      state.invites = action.payload;\n    },\n    acceptInvite(state, action: PayloadAction<string>) {\n      const index = state.invites.findIndex(\n        (invite) => invite.id === action.payload,\n      );\n      if (index !== -1) state.invites[index].state = INVITE_ACCEPTED;\n    },\n    rejectInvite(state, action: PayloadAction<string>) {\n      const index = state.invites.findIndex(\n        (invite) => invite.id === action.payload,\n      );\n      if (index !== -1) state.invites[index].state = INVITE_REJECTED;\n    },\n    setGroupSearch(state, action: PayloadAction<string>) {\n      state.searchParam = action.payload;\n    },\n    setGroupSearchOpen(state, action: PayloadAction<boolean>) {\n      state.searchOpen = action.payload;\n    },\n  },\n  extraReducers: {\n    [RESET_STORE]: () => {\n      return initialState;\n    },\n  },\n});\n\nexport const allGroupsSelector = (state: RootState) => state.groups.groups;\n\nexport const activeGroupsSelector = (state: RootState) =>\n  state.groups.groups.filter(\n    (group) => group.state === 'initiated' || group.state === 'verified',\n  );\n\nexport const searchParamSelector = (state: RootState) =>\n  state.groups.searchParam;\n\nexport const filteredGroupsSelector = createSelector(\n  activeGroupsSelector,\n  searchParamSelector,\n  (allGroups, searchParam) => {\n    let filteredGroups: Array<Group>;\n    if (searchParam !== '') {\n      const searchString = toSearchString(searchParam);\n      filteredGroups = allGroups.filter((group) => {\n        if (toSearchString(getGroupName(group)).includes(searchString)) {\n          // direct group name match\n          return true;\n        } else {\n          // check group members\n          const allMemberNames = ids2connections(knownMemberIDs(group)).map(\n            (member) => toSearchString(member.name),\n          );\n          for (const name of allMemberNames) {\n            if (name.includes(searchString)) {\n              // stop looking if a match is found\n              return true;\n            }\n          }\n          return false;\n        }\n      });\n    } else {\n      filteredGroups = allGroups;\n    }\n    return filteredGroups.sort(compareCreatedDesc);\n  },\n);\n\nexport const {\n  createGroup,\n  updateGroup,\n  upsertGroup,\n  deleteGroup,\n  setGroups,\n  updateMemberships,\n  joinGroup,\n  leaveGroup,\n  dismissFromGroup,\n  addAdmin,\n  setInvites,\n  rejectInvite,\n  acceptInvite,\n  setGroupSearch,\n  setGroupSearchOpen,\n} = groupsSlice.actions;\n\n// Export reducer\nexport default groupsSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}