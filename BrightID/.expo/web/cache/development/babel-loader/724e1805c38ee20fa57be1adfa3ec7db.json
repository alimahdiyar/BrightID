{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useSelector = exports.useDispatch = exports.store = exports.persistor = exports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _redux = require(\"redux\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _reduxPersist = require(\"redux-persist\");\n\nvar _toolkit = require(\"@reduxjs/toolkit\");\n\nvar _reducer = _interopRequireDefault(require(\"../reducer\"));\n\nvar _fsStorageAdapter = _interopRequireDefault(require(\"./storage/fsStorageAdapter\"));\n\nvar _keychainAdapter = _interopRequireDefault(require(\"./storage/keychainAdapter\"));\n\nvar _getStoredState = _interopRequireDefault(require(\"./getStoredState\"));\n\nvar _apps = require(\"./migrations/apps\");\n\nvar _connections = require(\"./migrations/connections\");\n\nvar version = 11;\nvar fsPersistConfig = {\n  storage: _fsStorageAdapter.default,\n  timeout: 0,\n  version: version,\n  getStoredState: _getStoredState.default\n};\nvar appsPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'apps',\n  migrate: _apps.appsMigrate\n});\nvar connectionsPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'connections',\n  migrate: _connections.connectionsMigrate,\n  blacklist: ['searchParam', 'searchOpen', 'filters']\n});\nvar groupsPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'groups',\n  blacklist: ['searchParam', 'searchOpen', 'newGroupInvitees']\n});\nvar notificationsPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'notifications',\n  blacklist: ['activeNotification', 'sessionNotifications']\n});\nvar userPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'user',\n  blacklist: ['searchParam', 'migrated']\n});\nvar tasksPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'tasks'\n});\nvar devicesPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'devices'\n});\nvar socialMediaPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'socialMedia'\n});\nvar settingsPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'settings',\n  blacklist: ['baseUrl']\n});\nvar operationsPersistConfig = (0, _extends2.default)({}, fsPersistConfig, {\n  key: 'operations'\n});\nvar keypairPersistConfig = {\n  key: 'keypair',\n  storage: _keychainAdapter.default,\n  timeout: 0,\n  version: version,\n  getStoredState: _getStoredState.default,\n  serialize: false,\n  deserialize: false\n};\nvar rootReducer = (0, _redux.combineReducers)((0, _extends2.default)({}, _reducer.default, {\n  apps: (0, _reduxPersist.persistReducer)(appsPersistConfig, _reducer.default.apps),\n  connections: (0, _reduxPersist.persistReducer)(connectionsPersistConfig, _reducer.default.connections),\n  groups: (0, _reduxPersist.persistReducer)(groupsPersistConfig, _reducer.default.groups),\n  keypair: (0, _reduxPersist.persistReducer)(keypairPersistConfig, _reducer.default.keypair),\n  notifications: (0, _reduxPersist.persistReducer)(notificationsPersistConfig, _reducer.default.notifications),\n  socialMedia: (0, _reduxPersist.persistReducer)(socialMediaPersistConfig, _reducer.default.socialMedia),\n  tasks: (0, _reduxPersist.persistReducer)(tasksPersistConfig, _reducer.default.tasks),\n  user: (0, _reduxPersist.persistReducer)(userPersistConfig, _reducer.default.user),\n  settings: (0, _reduxPersist.persistReducer)(settingsPersistConfig, _reducer.default.settings),\n  operations: (0, _reduxPersist.persistReducer)(operationsPersistConfig, _reducer.default.operations),\n  devices: (0, _reduxPersist.persistReducer)(devicesPersistConfig, _reducer.default.devices)\n}));\nvar store = (0, _toolkit.configureStore)({\n  reducer: rootReducer,\n  middleware: (0, _toolkit.getDefaultMiddleware)({\n    serializableCheck: false,\n    immutableCheck: false\n  })\n});\nexports.store = store;\nvar persistor = (0, _reduxPersist.persistStore)(store);\nexports.persistor = persistor;\n\nvar useDispatch = function useDispatch() {\n  return (0, _reactRedux.useDispatch)();\n};\n\nexports.useDispatch = useDispatch;\nvar useSelector = _reactRedux.useSelector;\nexports.useSelector = useSelector;\nvar _default = store;\nexports.default = _default;","map":{"version":3,"names":["version","fsPersistConfig","storage","FsStorage","timeout","getStoredState","appsPersistConfig","key","migrate","appsMigrate","connectionsPersistConfig","connectionsMigrate","blacklist","groupsPersistConfig","notificationsPersistConfig","userPersistConfig","tasksPersistConfig","devicesPersistConfig","socialMediaPersistConfig","settingsPersistConfig","operationsPersistConfig","keypairPersistConfig","KeychainStorage","serialize","deserialize","rootReducer","combineReducers","reducers","apps","persistReducer","connections","groups","keypair","notifications","socialMedia","tasks","user","settings","operations","devices","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","immutableCheck","persistor","persistStore","useDispatch","originalUseDispatch","useSelector","originalUseSelector"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/store/index.ts"],"sourcesContent":["import { combineReducers } from 'redux';\nimport {\n  useDispatch as originalUseDispatch,\n  useSelector as originalUseSelector,\n  TypedUseSelectorHook,\n} from 'react-redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport reducers from '@/reducer';\nimport FsStorage from './storage/fsStorageAdapter';\nimport KeychainStorage from './storage/keychainAdapter';\nimport getStoredState from './getStoredState';\nimport { appsMigrate } from './migrations/apps';\nimport { connectionsMigrate } from './migrations/connections';\n\n// update this in async migrate if changed to prevent require cycle\n\nconst version = 11;\n\nconst fsPersistConfig = {\n  storage: FsStorage,\n  timeout: 0,\n  // debug: __DEV__,\n  version,\n  getStoredState,\n};\n\nconst appsPersistConfig = {\n  ...fsPersistConfig,\n  key: 'apps',\n  migrate: appsMigrate,\n};\n\nconst connectionsPersistConfig = {\n  ...fsPersistConfig,\n  key: 'connections',\n  migrate: connectionsMigrate,\n  blacklist: ['searchParam', 'searchOpen', 'filters'],\n};\n\nconst groupsPersistConfig = {\n  ...fsPersistConfig,\n  key: 'groups',\n  blacklist: ['searchParam', 'searchOpen', 'newGroupInvitees'],\n};\n\nconst notificationsPersistConfig = {\n  ...fsPersistConfig,\n  key: 'notifications',\n  blacklist: ['activeNotification', 'sessionNotifications'],\n};\n\nconst userPersistConfig = {\n  ...fsPersistConfig,\n  key: 'user',\n  blacklist: ['searchParam', 'migrated'],\n};\n\nconst tasksPersistConfig = {\n  ...fsPersistConfig,\n  key: 'tasks',\n};\n\nconst devicesPersistConfig = {\n  ...fsPersistConfig,\n  key: 'devices',\n};\n\nconst socialMediaPersistConfig = {\n  ...fsPersistConfig,\n  key: 'socialMedia',\n};\n\nconst settingsPersistConfig = {\n  ...fsPersistConfig,\n  key: 'settings',\n  blacklist: ['baseUrl'],\n};\n\nconst operationsPersistConfig = {\n  ...fsPersistConfig,\n  key: 'operations',\n};\n\nconst keypairPersistConfig = {\n  key: 'keypair',\n  storage: KeychainStorage,\n  timeout: 0,\n  // debug: __DEV__,\n  version,\n  getStoredState,\n  serialize: false,\n  deserialize: false,\n};\n\nconst rootReducer = combineReducers({\n  ...reducers,\n  apps: persistReducer(appsPersistConfig, reducers.apps),\n  connections: persistReducer(connectionsPersistConfig, reducers.connections),\n  groups: persistReducer(groupsPersistConfig, reducers.groups),\n  keypair: persistReducer(keypairPersistConfig, reducers.keypair),\n  notifications: persistReducer(\n    notificationsPersistConfig,\n    reducers.notifications,\n  ),\n  socialMedia: persistReducer(socialMediaPersistConfig, reducers.socialMedia),\n  tasks: persistReducer(tasksPersistConfig, reducers.tasks),\n  user: persistReducer(userPersistConfig, reducers.user),\n  settings: persistReducer(settingsPersistConfig, reducers.settings),\n  operations: persistReducer(operationsPersistConfig, reducers.operations),\n  devices: persistReducer(devicesPersistConfig, reducers.devices),\n});\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: getDefaultMiddleware({\n    // We have a bunch of non-serializable data like secret key etc.\n    // TODO For now disabled completely. Revisit later for fine-grained configuration.\n    serializableCheck: false,\n    immutableCheck: false,\n  }),\n});\n\nexport const persistor = persistStore(store);\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport const useDispatch = () => originalUseDispatch<AppDispatch>();\nexport const useSelector: TypedUseSelectorHook<RootState> = originalUseSelector;\n\nexport default store;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}