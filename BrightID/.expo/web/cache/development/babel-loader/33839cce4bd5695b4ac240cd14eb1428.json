{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useEffect, useState } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport InteractionManager from \"react-native-web/dist/exports/InteractionManager\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from \"../../../store\";\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from \"../../../theme/fonts\";\nimport { WHITE, ORANGE } from \"../../../theme/colors\";\nimport { DEVICE_LARGE } from \"../../../utils/deviceConstants\";\nimport { backupAppData } from \"../RecoveryFlow/thunks/backupThunks\";\nimport { setBackupCompleted } from \"../../../reducer/userSlice\";\nimport DetoxEnabled from \"../../../utils/Detox\";\nimport { saveId } from \"./thunks\";\nimport Congratulations from \"../../Icons/Congratulations\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar TIMEOUT = 1500;\nexport var SuccessScreen = function SuccessScreen() {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n  var password = useSelector(function (state) {\n    return state.user.password;\n  });\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      endTime = _useState4[0],\n      setEndTime = _useState4[1];\n\n  useFocusEffect(useCallback(function () {\n    var intervalID = setInterval(function () {\n      setCurrentTime(Date.now());\n    }, 300);\n    return function () {\n      clearInterval(intervalID);\n    };\n  }, []));\n  useEffect(function () {\n    if (endTime && currentTime && currentTime >= endTime) {\n      dispatch(saveId());\n\n      if (password) {\n        console.log(\"Starting initial backup\");\n        dispatch(backupAppData()).then(function () {\n          dispatch(setBackupCompleted(true));\n        });\n      }\n\n      return function () {\n        if (!DetoxEnabled) {\n          InteractionManager.runAfterInteractions(function () {\n            navigation.navigate('ViewPasswordWalkthrough');\n          });\n        }\n      };\n    }\n  }, [currentTime, endTime, dispatch, navigation, password]);\n  useFocusEffect(useCallback(function () {\n    setEndTime(Date.now() + TIMEOUT);\n  }, []));\n  return _jsxs(_Fragment, {\n    children: [_jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsx(StatusBar, {\n        barStyle: \"dark-content\",\n        backgroundColor: WHITE,\n        animated: true\n      }), _jsx(View, {\n        style: styles.header,\n        children: _jsx(Image, {\n          source: require(\"../../../static/brightid-final.png\"),\n          accessible: true,\n          accessibilityLabel: \"Home Header Logo\",\n          resizeMode: \"contain\",\n          style: styles.logo\n        })\n      }), _jsx(View, {\n        style: styles.center,\n        children: _jsxs(View, {\n          style: styles.imageContainer,\n          children: [_jsx(View, {\n            style: styles.phoneContainer,\n            children: _jsx(Image, {\n              source: require(\"../../../static/brightid-phone.png\"),\n              accessible: true,\n              accessibilityLabel: \"Home Header Logo\",\n              resizeMode: \"contain\",\n              style: styles.phone\n            })\n          }), _jsx(Congratulations, {\n            width: 190,\n            height: 230\n          })]\n        })\n      }), _jsx(Text, {\n        style: styles.registerText,\n        children: t('onboarding.text.congratulations')\n      })]\n    }), _jsx(View, {\n      style: styles.orangeBottom\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    alignItems: 'center',\n    flexDirection: 'column',\n    borderBottomLeftRadius: 58,\n    borderBottomRightRadius: 58,\n    marginBottom: DEVICE_LARGE ? 35 : 20,\n    zIndex: 2,\n    overflow: 'hidden'\n  },\n  orangeBottom: {\n    backgroundColor: ORANGE,\n    width: '100%',\n    height: 100,\n    zIndex: 1,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  header: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: '15%'\n  },\n  logo: {\n    maxWidth: '40%',\n    maxHeight: 90\n  },\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  imageContainer: {\n    width: 190,\n    height: 230\n  },\n  phoneContainer: {\n    position: 'absolute',\n    top: 25,\n    left: 25\n  },\n  phone: {\n    width: 140,\n    height: 180\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24,\n    marginBottom: DEVICE_LARGE ? 50 : 45\n  }\n});\nexport default SuccessScreen;","map":{"version":3,"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/SignUpFlow/SuccessScreen.tsx"],"names":["TIMEOUT","SuccessScreen","t","useTranslation","dispatch","useDispatch","navigation","useNavigation","password","useSelector","state","currentTime","setCurrentTime","useState","endTime","setEndTime","useFocusEffect","useCallback","intervalID","setInterval","Date","clearInterval","useEffect","saveId","console","backupAppData","setBackupCompleted","InteractionManager","styles","require","StyleSheet","container","flex","backgroundColor","alignItems","flexDirection","borderBottomLeftRadius","borderBottomRightRadius","marginBottom","DEVICE_LARGE","zIndex","overflow","orangeBottom","width","height","position","bottom","left","right","header","justifyContent","marginTop","logo","maxWidth","maxHeight","center","imageContainer","phoneContainer","top","phone","registerText","fontFamily","fontSize","textAlign","lineHeight"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  Image,\n  InteractionManager,\n  SafeAreaView,\n  StatusBar,\n  StyleSheet,\n  Text,\n  View,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from '@/store';\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from '@/theme/fonts';\nimport { WHITE, ORANGE } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport { backupAppData } from '@/components/Onboarding/RecoveryFlow/thunks/backupThunks';\nimport { setBackupCompleted } from '@/reducer/userSlice';\nimport DetoxEnabled from '@/utils/Detox';\nimport { saveId } from './thunks';\nimport Congratulations from '../../Icons/Congratulations';\n/* Onboarding Success Screen */\n\n/* ======================================== */\n\nconst TIMEOUT = 1500;\n\nexport const SuccessScreen = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const password = useSelector((state: State) => state.user.password);\n\n  // this is used instead of a timeout\n  const [currentTime, setCurrentTime] = useState(null);\n  const [endTime, setEndTime] = useState(null);\n\n  /**\n   * update the time until\n   */\n  useFocusEffect(\n    useCallback(() => {\n      const intervalID = setInterval(() => {\n        setCurrentTime(Date.now());\n      }, 300);\n      return () => {\n        clearInterval(intervalID);\n      };\n    }, []),\n  );\n\n  useEffect(() => {\n    if (endTime && currentTime && currentTime >= endTime) {\n      // this  will cause navigation to HomeScreen\n      dispatch(saveId());\n      if (password) {\n        console.log(`Starting initial backup`);\n        dispatch(backupAppData()).then(() => {\n          dispatch(setBackupCompleted(true));\n        });\n      }\n      return () => {\n        // navigate to view password walkthrough\n        if (!DetoxEnabled) {\n          InteractionManager.runAfterInteractions(() => {\n            navigation.navigate('ViewPasswordWalkthrough');\n          });\n        }\n      };\n    }\n  }, [currentTime, endTime, dispatch, navigation, password]);\n\n  useFocusEffect(\n    useCallback(() => {\n      // wait 1.5 seconds before navigating to home page\n      setEndTime(Date.now() + TIMEOUT);\n    }, []),\n  );\n  return (\n    <>\n      <SafeAreaView style={styles.container}>\n        <StatusBar\n          barStyle=\"dark-content\"\n          backgroundColor={WHITE}\n          animated={true}\n        />\n\n        <View style={styles.header}>\n          <Image\n            source={require('@/static/brightid-final.png')}\n            accessible={true}\n            accessibilityLabel=\"Home Header Logo\"\n            resizeMode=\"contain\"\n            style={styles.logo}\n          />\n        </View>\n        <View style={styles.center}>\n          <View style={styles.imageContainer}>\n            <View style={styles.phoneContainer}>\n              <Image\n                source={require('@/static/brightid-phone.png')}\n                accessible={true}\n                accessibilityLabel=\"Home Header Logo\"\n                resizeMode=\"contain\"\n                style={styles.phone}\n              />\n            </View>\n            <Congratulations width={190} height={230} />\n          </View>\n        </View>\n        <Text style={styles.registerText}>\n          {t('onboarding.text.congratulations')}\n        </Text>\n      </SafeAreaView>\n      <View style={styles.orangeBottom} />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    alignItems: 'center',\n    flexDirection: 'column',\n    borderBottomLeftRadius: 58,\n    borderBottomRightRadius: 58,\n    marginBottom: DEVICE_LARGE ? 35 : 20,\n    zIndex: 2,\n    overflow: 'hidden',\n  },\n  orangeBottom: {\n    backgroundColor: ORANGE,\n    width: '100%',\n    height: 100,\n    zIndex: 1,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  header: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: '15%',\n  },\n  logo: {\n    maxWidth: '40%',\n    maxHeight: 90,\n  },\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  imageContainer: {\n    width: 190,\n    height: 230,\n  },\n  phoneContainer: {\n    position: 'absolute',\n    top: 25,\n    left: 25,\n  },\n  phone: {\n    width: 140,\n    height: 180,\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24,\n    marginBottom: DEVICE_LARGE ? 50 : 45,\n  },\n});\n\nexport default SuccessScreen;\n"]},"metadata":{},"sourceType":"module"}