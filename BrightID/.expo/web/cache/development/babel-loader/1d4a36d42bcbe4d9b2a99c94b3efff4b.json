{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeSpinkit = _interopRequireDefault(require(\"react-native-spinkit\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nvar _actions = require(\"../../../actions\");\n\nvar _store = require(\"../../../store\");\n\nvar _colors = require(\"../../../theme/colors\");\n\nvar _fonts = require(\"../../../theme/fonts\");\n\nvar _deviceConstants = require(\"../../../utils/deviceConstants\");\n\nvar _recoveryThunks = require(\"../RecoveryFlow/thunks/recoveryThunks\");\n\nvar _recoveryDataSlice = require(\"../RecoveryFlow/recoveryDataSlice\");\n\nvar _channelThunks = require(\"./thunks/channelThunks\");\n\nvar _this = this,\n    _jsxFileName = \"/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/ImportFlow/ImportScreen.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar ImportScreen = function ImportScreen() {\n  var _useTranslation = (0, _reactI18next.useTranslation)(),\n      t = _useTranslation.t;\n\n  var dispatch = (0, _store.useDispatch)();\n  var recoveryData = (0, _store.useSelector)(function (state) {\n    return state.recoveryData;\n  });\n  var importCompleted = (0, _store.useSelector)(_recoveryDataSlice.uploadCompletedByOtherSide);\n  (0, _react.useEffect)(function () {\n    if (importCompleted) {\n      (0, _channelThunks.clearImportChannel)();\n      dispatch((0, _actions.setPrimaryDevice)(false));\n      dispatch((0, _recoveryThunks.setRecoveryKeys)());\n      dispatch((0, _recoveryDataSlice.resetRecoveryData)());\n      dispatch((0, _actions.setUserId)(recoveryData.id));\n    }\n  }, [recoveryData, dispatch, importCompleted]);\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.waitingContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.infoText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, t('import.text.waitImporting')), _react.default.createElement(_reactNativeSpinkit.default, {\n    isVisible: true,\n    size: _deviceConstants.DEVICE_LARGE ? 64 : 44,\n    type: \"Wave\",\n    color: _colors.ORANGE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  })));\n};\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    flex: 1\n  },\n  waitingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    textAlign: 'center',\n    color: _colors.BLACK,\n    fontSize: _fonts.fontSize[16],\n    maxWidth: '90%'\n  }\n});\n\nvar _default = ImportScreen;\nexports.default = _default;","map":{"version":3,"names":["ImportScreen","useTranslation","t","dispatch","useDispatch","recoveryData","useSelector","state","importCompleted","uploadCompletedByOtherSide","useEffect","clearImportChannel","setPrimaryDevice","setRecoveryKeys","resetRecoveryData","setUserId","id","styles","container","waitingContainer","infoText","DEVICE_LARGE","ORANGE","StyleSheet","create","justifyContent","alignItems","width","flex","fontFamily","textAlign","color","BLACK","fontSize","maxWidth"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/ImportFlow/ImportScreen.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport Spinner from 'react-native-spinkit';\nimport { useTranslation } from 'react-i18next';\nimport { setUserId, setPrimaryDevice } from '@/actions';\nimport { useSelector, useDispatch } from '@/store';\nimport { BLACK, ORANGE } from '@/theme/colors';\nimport { fontSize } from '@/theme/fonts';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport { setRecoveryKeys } from '../RecoveryFlow/thunks/recoveryThunks';\nimport {\n  resetRecoveryData,\n  uploadCompletedByOtherSide,\n} from '../RecoveryFlow/recoveryDataSlice';\nimport { clearImportChannel } from './thunks/channelThunks';\n\n/* Component to track import restore */\nconst ImportScreen = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const recoveryData = useSelector((state: State) => state.recoveryData);\n  const importCompleted = useSelector(uploadCompletedByOtherSide);\n\n  useEffect(() => {\n    if (importCompleted) {\n      clearImportChannel();\n      dispatch(setPrimaryDevice(false));\n      dispatch(setRecoveryKeys());\n      dispatch(resetRecoveryData());\n      dispatch(setUserId(recoveryData.id));\n    }\n  }, [recoveryData, dispatch, importCompleted]);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.waitingContainer}>\n        <Text style={styles.infoText}>{t('import.text.waitImporting')}</Text>\n        <Spinner\n          isVisible={true}\n          size={DEVICE_LARGE ? 64 : 44}\n          type=\"Wave\"\n          color={ORANGE}\n        />\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    flex: 1,\n  },\n  waitingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    textAlign: 'center',\n    color: BLACK,\n    fontSize: fontSize[16],\n    maxWidth: '90%',\n  },\n});\n\nexport default ImportScreen;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAIA;;;;;;;;;AAGA,IAAMA,YAAY,GAAG,SAAfA,YAAe,GAAM;EACzB,sBAAc,IAAAC,4BAAA,GAAd;EAAA,IAAQC,CAAR,mBAAQA,CAAR;;EACA,IAAMC,QAAQ,GAAG,IAAAC,kBAAA,GAAjB;EACA,IAAMC,YAAY,GAAG,IAAAC,kBAAA,EAAY,UAACC,KAAD;IAAA,OAAkBA,KAAK,CAACF,YAAxB;EAAA,CAAZ,CAArB;EACA,IAAMG,eAAe,GAAG,IAAAF,kBAAA,EAAYG,6CAAZ,CAAxB;EAEA,IAAAC,gBAAA,EAAU,YAAM;IACd,IAAIF,eAAJ,EAAqB;MACnB,IAAAG,iCAAA;MACAR,QAAQ,CAAC,IAAAS,yBAAA,EAAiB,KAAjB,CAAD,CAAR;MACAT,QAAQ,CAAC,IAAAU,+BAAA,GAAD,CAAR;MACAV,QAAQ,CAAC,IAAAW,oCAAA,GAAD,CAAR;MACAX,QAAQ,CAAC,IAAAY,kBAAA,EAAUV,YAAY,CAACW,EAAvB,CAAD,CAAR;IACD;EACF,CARD,EAQG,CAACX,YAAD,EAAeF,QAAf,EAAyBK,eAAzB,CARH;EAUA,OACE,6BAAC,iBAAD;IAAM,KAAK,EAAES,MAAM,CAACC,SAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,6BAAC,iBAAD;IAAM,KAAK,EAAED,MAAM,CAACE,gBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,6BAAC,iBAAD;IAAM,KAAK,EAAEF,MAAM,CAACG,QAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA+BlB,CAAC,CAAC,2BAAD,CAAhC,CADF,EAEE,6BAAC,2BAAD;IACE,SAAS,EAAE,IADb;IAEE,IAAI,EAAEmB,6BAAA,GAAe,EAAf,GAAoB,EAF5B;IAGE,IAAI,EAAC,MAHP;IAIE,KAAK,EAAEC,cAJT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,CADF,CADF;AAaD,CA7BD;;AA+BA,IAAML,MAAM,GAAGM,uBAAA,CAAWC,MAAX,CAAkB;EAC/BN,SAAS,EAAE;IACTO,cAAc,EAAE,QADP;IAETC,UAAU,EAAE,QAFH;IAGTC,KAAK,EAAE,MAHE;IAITC,IAAI,EAAE;EAJG,CADoB;EAO/BT,gBAAgB,EAAE;IAChBS,IAAI,EAAE,CADU;IAEhBH,cAAc,EAAE,QAFA;IAGhBC,UAAU,EAAE;EAHI,CAPa;EAY/BN,QAAQ,EAAE;IACRS,UAAU,EAAE,gBADJ;IAERC,SAAS,EAAE,QAFH;IAGRC,KAAK,EAAEC,aAHC;IAIRC,QAAQ,EAAEA,eAAA,CAAS,EAAT,CAJF;IAKRC,QAAQ,EAAE;EALF;AAZqB,CAAlB,CAAf;;eAqBelC,Y"},"metadata":{},"sourceType":"script"}