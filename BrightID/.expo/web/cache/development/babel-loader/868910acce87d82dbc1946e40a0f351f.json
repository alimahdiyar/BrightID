{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useCallback, useState } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useActionSheet } from '@expo/react-native-action-sheet';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from \"../../../store\";\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from \"../../../theme/fonts\";\nimport { WHITE, BLACK, DARKER_GREY, ORANGE, BLUE } from \"../../../theme/colors\";\nimport { DEVICE_LARGE } from \"../../../utils/deviceConstants\";\nimport { takePhoto, chooseImage } from \"../../../utils/images\";\nimport { retrieveImage } from \"../../../utils/filesystem\";\nimport { savePhoto } from \"./thunks\";\nimport Avatar from \"../../Icons/Avatar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport var PhotoScreen = function PhotoScreen() {\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n\n  var _useActionSheet = useActionSheet(),\n      showActionSheetWithOptions = _useActionSheet.showActionSheetWithOptions;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      finalBase64 = _useState2[0],\n      setfinalBase64 = _useState2[1];\n\n  var photoFilename = useSelector(function (state) {\n    return state.user.photo.filename;\n  });\n  useFocusEffect(useCallback(function () {\n    if (photoFilename) {\n      retrieveImage(photoFilename).then(setfinalBase64);\n    }\n  }, [photoFilename]));\n\n  var getPhotoFromCamera = function _callee() {\n    var _await$takePhoto, mime, data, uri;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(takePhoto());\n\n          case 3:\n            _await$takePhoto = _context.sent;\n            mime = _await$takePhoto.mime;\n            data = _await$takePhoto.data;\n            uri = \"data:\" + mime + \";base64,\" + data;\n            setfinalBase64(uri);\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0.message);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var getPhotoFromLibrary = function _callee2() {\n    var _await$chooseImage, mime, data, uri;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(chooseImage());\n\n          case 3:\n            _await$chooseImage = _context2.sent;\n            mime = _await$chooseImage.mime;\n            data = _await$chooseImage.data;\n            uri = \"data:\" + mime + \";base64,\" + data;\n            setfinalBase64(uri);\n            _context2.next = 13;\n            break;\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0.message);\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var handleAddPhoto = function handleAddPhoto() {\n    showActionSheetWithOptions({\n      options: [t('common.photoActionSheet.takePhoto'), t('common.photoActionSheet.choosePhoto'), t('common.actionSheet.cancel')],\n      cancelButtonIndex: 2,\n      title: t('common.photoActionSheet.title'),\n      showSeparators: true,\n      textStyle: {\n        color: BLUE,\n        textAlign: 'center',\n        width: '100%',\n        fontSize: fontSize[18]\n      },\n      titleTextStyle: {\n        textAlign: 'center',\n        fontSize: fontSize[20],\n        width: '100%'\n      }\n    }, function (buttonIndex) {\n      if (buttonIndex === 0) {\n        getPhotoFromCamera();\n      } else if (buttonIndex === 1) {\n        getPhotoFromLibrary();\n      }\n    });\n  };\n\n  var handleSubmit = function handleSubmit() {\n    dispatch(savePhoto(finalBase64)).then(function () {\n      navigation.navigate('SignUpPassword');\n    }).catch(function (err) {\n      Alert.alert(err.message);\n    });\n  };\n\n  var disabled = !finalBase64;\n  return _jsxs(_Fragment, {\n    children: [_jsx(StatusBar, {\n      barStyle: \"dark-content\",\n      backgroundColor: WHITE,\n      animated: true\n    }), _jsx(View, {\n      style: styles.orangeTop\n    }), _jsxs(View, {\n      style: styles.container,\n      testID: \"PhotoScreen\",\n      children: [!finalBase64 ? _jsx(View, {\n        style: styles.descContainer,\n        children: _jsx(Text, {\n          style: styles.registerText,\n          children: t('signup.text.pleaseAddPhoto')\n        })\n      }) : null, _jsxs(View, {\n        style: styles.midContainer,\n        children: [_jsx(TouchableOpacity, {\n          testID: \"addPhoto\",\n          onPress: handleAddPhoto,\n          accessible: true,\n          accessibilityLabel: t(\"common.accessibilityLabel.\" + (finalBase64 ? 'editPhoto' : 'addPhoto')),\n          children: finalBase64 ? _jsx(Image, {\n            style: styles.photo,\n            source: {\n              uri: finalBase64\n            }\n          }) : _jsx(Avatar, {\n            addPicture: true,\n            width: 150,\n            height: 150\n          })\n        }), _jsx(Text, {\n          style: styles.privacyText,\n          children: t('signup.text.photoNotShared')\n        })]\n      }), _jsx(View, {\n        style: styles.submitContainer,\n        children: _jsx(TouchableOpacity, {\n          style: [styles.submitBtn, {\n            opacity: disabled ? 0.7 : 1\n          }],\n          onPress: handleSubmit,\n          accessibilityLabel: t('signup.button.submit'),\n          disabled: disabled,\n          testID: \"submitPhoto\",\n          children: _jsx(Text, {\n            style: styles.submitBtnText,\n            children: t('signup.button.submit')\n          })\n        })\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  orangeTop: {\n    backgroundColor: ORANGE,\n    height: DEVICE_LARGE ? 70 : 65,\n    width: '100%',\n    zIndex: 1\n  },\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    borderTopLeftRadius: 58,\n    marginTop: -58,\n    overflow: 'hidden',\n    zIndex: 2\n  },\n  descContainer: {\n    marginTop: DEVICE_LARGE ? 100 : 85\n  },\n  midContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24\n  },\n  photo: {\n    width: 150,\n    height: 150,\n    borderRadius: 75,\n    shadowColor: BLACK,\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.8,\n    shadowRadius: 2\n  },\n  privacyText: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[11],\n    color: DARKER_GREY,\n    textAlign: 'center',\n    marginTop: DEVICE_LARGE ? 36 : 30,\n    width: '72%'\n  },\n  submitContainer: {\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: DEVICE_LARGE ? 85 : 70\n  },\n  submitBtn: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: DEVICE_LARGE ? 180 : 160,\n    height: DEVICE_LARGE ? 50 : 45,\n    backgroundColor: ORANGE,\n    borderRadius: 100,\n    elevation: 1,\n    shadowColor: BLACK,\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    shadowRadius: 4\n  },\n  submitBtnText: {\n    fontFamily: 'Poppins-Bold',\n    fontSize: fontSize[16],\n    color: WHITE\n  }\n});\nexport default PhotoScreen;","map":{"version":3,"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/SignUpFlow/PhotoScreen.tsx"],"names":["PhotoScreen","dispatch","useDispatch","navigation","useNavigation","showActionSheetWithOptions","useActionSheet","t","useTranslation","finalBase64","setfinalBase64","useState","photoFilename","useSelector","state","useFocusEffect","useCallback","retrieveImage","getPhotoFromCamera","mime","data","takePhoto","uri","console","getPhotoFromLibrary","chooseImage","handleAddPhoto","options","cancelButtonIndex","title","showSeparators","textStyle","color","textAlign","width","fontSize","titleTextStyle","buttonIndex","handleSubmit","savePhoto","Alert","err","disabled","styles","opacity","StyleSheet","orangeTop","backgroundColor","height","DEVICE_LARGE","zIndex","container","flex","borderTopLeftRadius","marginTop","overflow","descContainer","midContainer","alignItems","justifyContent","registerText","fontFamily","lineHeight","photo","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","privacyText","submitContainer","marginBottom","submitBtn","elevation","submitBtnText"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react';\nimport {\n  Alert,\n  Image,\n  StatusBar,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport { useActionSheet } from '@expo/react-native-action-sheet';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from '@/store';\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from '@/theme/fonts';\nimport { WHITE, BLACK, DARKER_GREY, ORANGE, BLUE } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport { takePhoto, chooseImage } from '@/utils/images';\nimport { retrieveImage } from '@/utils/filesystem';\nimport { savePhoto } from './thunks';\nimport Avatar from '../../Icons/Avatar';\n\n/* Description */\n\n/* ======================================== */\n\n/**\n * Initial Onboarding screen of BrightID\n */\n\n/* Onboarding Screen */\n\n/* ======================================== */\nexport const PhotoScreen = () => {\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const { showActionSheetWithOptions } = useActionSheet();\n  const { t } = useTranslation();\n\n  const [finalBase64, setfinalBase64] = useState('');\n\n  const photoFilename = useSelector(\n    (state: State) => state.user.photo.filename,\n  );\n\n  useFocusEffect(\n    useCallback(() => {\n      if (photoFilename) {\n        retrieveImage(photoFilename).then(setfinalBase64);\n      }\n    }, [photoFilename]),\n  );\n\n  const getPhotoFromCamera = async () => {\n    try {\n      const { mime, data } = await takePhoto();\n      const uri = `data:${mime};base64,${data}`;\n      setfinalBase64(uri);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  const getPhotoFromLibrary = async () => {\n    try {\n      const { mime, data } = await chooseImage();\n      const uri = `data:${mime};base64,${data}`;\n      setfinalBase64(uri);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  const handleAddPhoto = () => {\n    showActionSheetWithOptions(\n      {\n        options: [\n          t('common.photoActionSheet.takePhoto'),\n          t('common.photoActionSheet.choosePhoto'),\n          t('common.actionSheet.cancel'),\n        ],\n        cancelButtonIndex: 2,\n        title: t('common.photoActionSheet.title'),\n        showSeparators: true,\n        textStyle: {\n          color: BLUE,\n          textAlign: 'center',\n          width: '100%',\n          fontSize: fontSize[18],\n        },\n        titleTextStyle: {\n          textAlign: 'center',\n          fontSize: fontSize[20],\n          width: '100%',\n        },\n      },\n      (buttonIndex) => {\n        if (buttonIndex === 0) {\n          getPhotoFromCamera();\n        } else if (buttonIndex === 1) {\n          getPhotoFromLibrary();\n        }\n      },\n    );\n  };\n\n  const handleSubmit = () => {\n    dispatch(savePhoto(finalBase64))\n      .then(() => {\n        navigation.navigate('SignUpPassword');\n      })\n      .catch((err) => {\n        Alert.alert(err.message);\n      });\n  };\n\n  const disabled = !finalBase64;\n\n  return (\n    <>\n      <StatusBar\n        barStyle=\"dark-content\"\n        backgroundColor={WHITE}\n        animated={true}\n      />\n      <View style={styles.orangeTop} />\n      <View style={styles.container} testID=\"PhotoScreen\">\n        {!finalBase64 ? (\n          <View style={styles.descContainer}>\n            <Text style={styles.registerText}>\n              {t('signup.text.pleaseAddPhoto')}\n            </Text>\n          </View>\n        ) : null}\n        <View style={styles.midContainer}>\n          <TouchableOpacity\n            testID=\"addPhoto\"\n            onPress={handleAddPhoto}\n            accessible={true}\n            accessibilityLabel={t(\n              `common.accessibilityLabel.${\n                finalBase64 ? 'editPhoto' : 'addPhoto'\n              }`,\n            )}\n          >\n            {finalBase64 ? (\n              <Image style={styles.photo} source={{ uri: finalBase64 }} />\n            ) : (\n              <Avatar addPicture={true} width={150} height={150} />\n            )}\n          </TouchableOpacity>\n          <Text style={styles.privacyText}>\n            {t('signup.text.photoNotShared')}\n          </Text>\n        </View>\n        <View style={styles.submitContainer}>\n          <TouchableOpacity\n            style={[styles.submitBtn, { opacity: disabled ? 0.7 : 1 }]}\n            onPress={handleSubmit}\n            accessibilityLabel={t('signup.button.submit')}\n            disabled={disabled}\n            testID=\"submitPhoto\"\n          >\n            <Text style={styles.submitBtnText}>\n              {t('signup.button.submit')}\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  orangeTop: {\n    backgroundColor: ORANGE,\n    height: DEVICE_LARGE ? 70 : 65,\n    width: '100%',\n    zIndex: 1,\n  },\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    borderTopLeftRadius: 58,\n    marginTop: -58,\n    overflow: 'hidden',\n    zIndex: 2,\n  },\n  descContainer: {\n    marginTop: DEVICE_LARGE ? 100 : 85,\n  },\n  midContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24,\n  },\n  photo: {\n    width: 150,\n    height: 150,\n    borderRadius: 75,\n    shadowColor: BLACK,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.8,\n    shadowRadius: 2,\n  },\n  privacyText: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[11],\n    color: DARKER_GREY,\n    textAlign: 'center',\n    marginTop: DEVICE_LARGE ? 36 : 30,\n    width: '72%',\n  },\n  submitContainer: {\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: DEVICE_LARGE ? 85 : 70,\n  },\n  submitBtn: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: DEVICE_LARGE ? 180 : 160,\n    height: DEVICE_LARGE ? 50 : 45,\n    backgroundColor: ORANGE,\n    borderRadius: 100,\n    elevation: 1,\n    shadowColor: BLACK,\n    shadowOffset: { width: 0, height: 4 },\n    shadowRadius: 4,\n  },\n  submitBtnText: {\n    fontFamily: 'Poppins-Bold',\n    fontSize: fontSize[16],\n    color: WHITE,\n  },\n});\n\nexport default PhotoScreen;\n"]},"metadata":{},"sourceType":"module"}