{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.socialMediaUrl = exports.SocialMediaService = exports.SOCIAL_API_AUTHENTICATION_ERROR = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _apisauce = require(\"apisauce\");\n\nvar socialMediaUrl = 'https://finder.brightid.org/api';\nexports.socialMediaUrl = socialMediaUrl;\nvar SOCIAL_API_AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR';\nexports.SOCIAL_API_AUTHENTICATION_ERROR = SOCIAL_API_AUTHENTICATION_ERROR;\n\nvar SocialMediaService = function () {\n  function SocialMediaService() {\n    (0, _classCallCheck2.default)(this, SocialMediaService);\n    this.socialMediaApi = (0, _apisauce.create)({\n      baseURL: socialMediaUrl\n    });\n  }\n\n  (0, _createClass2.default)(SocialMediaService, [{\n    key: \"retrieveSocialMediaVariations\",\n    value: function retrieveSocialMediaVariations() {\n      var res;\n      return _regenerator.default.async(function retrieveSocialMediaVariations$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regenerator.default.awrap(this.socialMediaApi.get('/v1/social-media-variation/list/'));\n\n            case 2:\n              res = _context.sent;\n              SocialMediaService.throwOnError(res);\n              return _context.abrupt(\"return\", res.data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"createSocialMedia\",\n    value: function createSocialMedia(_ref) {\n      var variation, profileHashes, network, res;\n      return _regenerator.default.async(function createSocialMedia$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              variation = _ref.variation, profileHashes = _ref.profileHashes, network = _ref.network;\n              _context2.next = 3;\n              return _regenerator.default.awrap(this.socialMediaApi.post('/v1/social-media/create/', {\n                variation: variation,\n                profileHashes: profileHashes,\n                network: network\n              }));\n\n            case 3:\n              res = _context2.sent;\n              SocialMediaService.throwOnError(res);\n              return _context2.abrupt(\"return\", res.data);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"updateSocialMedia\",\n    value: function updateSocialMedia(_ref2) {\n      var token, profileHashes, res;\n      return _regenerator.default.async(function updateSocialMedia$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              token = _ref2.token, profileHashes = _ref2.profileHashes;\n              _context3.next = 3;\n              return _regenerator.default.awrap(this.socialMediaApi.put('/v1/social-media/update/', {\n                profileHashes: profileHashes\n              }, {\n                headers: {\n                  Authorization: \"Token \" + token\n                }\n              }));\n\n            case 3:\n              res = _context3.sent;\n              SocialMediaService.throwOnError(res);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"deleteSocialMediaProfile\",\n    value: function deleteSocialMediaProfile(token) {\n      var res;\n      return _regenerator.default.async(function deleteSocialMediaProfile$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regenerator.default.awrap(this.socialMediaApi.delete('/v1/social-media/delete/', {}, {\n                headers: {\n                  Authorization: \"Token \" + token\n                }\n              }));\n\n            case 2:\n              res = _context4.sent;\n              SocialMediaService.throwOnError(res);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"querySocialMedia\",\n    value: function querySocialMedia(payload) {\n      var res;\n      return _regenerator.default.async(function querySocialMedia$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regenerator.default.awrap(this.socialMediaApi.post('/v1/social-media/query/', payload));\n\n            case 2:\n              res = _context5.sent;\n              SocialMediaService.throwOnError(res);\n              return _context5.abrupt(\"return\", res.data);\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }], [{\n    key: \"throwOnError\",\n    value: function throwOnError(response) {\n      if (response.ok) {\n        return;\n      }\n\n      if (response.data && response.data.errorMessage) {\n        throw new Error(response.data.errorMessage);\n      }\n\n      if (response.status === 401) {\n        throw new Error(SOCIAL_API_AUTHENTICATION_ERROR);\n      }\n\n      console.log(\"socialApi response error: \" + response.status + \" - \" + response.problem);\n      throw new Error(response.problem);\n    }\n  }]);\n  return SocialMediaService;\n}();\n\nexports.SocialMediaService = SocialMediaService;","map":{"version":3,"names":["socialMediaUrl","SOCIAL_API_AUTHENTICATION_ERROR","SocialMediaService","socialMediaApi","create","baseURL","get","res","throwOnError","data","variation","profileHashes","network","post","token","put","headers","Authorization","delete","payload","response","ok","errorMessage","Error","status","console","log","problem"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/api/socialMediaService.ts"],"sourcesContent":["import { create, ApisauceInstance, ApiResponse } from 'apisauce';\nimport {\n  CreateSocialMediaRequest,\n  CreateSocialMediaResponse,\n  SocialMediaQueryRequest,\n  SocialMediaQueryResponse,\n  UpdateSocialMediaRequest,\n} from '@/api/socialMediaService_types.d';\n\nexport const socialMediaUrl = 'https://finder.brightid.org/api';\n\nexport const SOCIAL_API_AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR';\n\nclass SocialMediaService {\n  socialMediaApi: ApisauceInstance;\n\n  constructor() {\n    this.socialMediaApi = create({\n      baseURL: socialMediaUrl,\n    });\n  }\n\n  static throwOnError(response: ApiResponse<any>) {\n    if (response.ok) {\n      return;\n    }\n    if (response.data && response.data.errorMessage) {\n      throw new Error(response.data.errorMessage);\n    }\n    if (response.status === 401) {\n      throw new Error(SOCIAL_API_AUTHENTICATION_ERROR);\n    }\n    console.log(\n      `socialApi response error: ${response.status} - ${response.problem}`,\n    );\n    throw new Error(response.problem);\n  }\n\n  async retrieveSocialMediaVariations() {\n    const res = await this.socialMediaApi.get<SocialMediaVariation[]>(\n      '/v1/social-media-variation/list/',\n    );\n    SocialMediaService.throwOnError(res);\n    return res.data;\n  }\n\n  async createSocialMedia({\n    variation,\n    profileHashes,\n    network,\n  }: CreateSocialMediaRequest) {\n    const res = await this.socialMediaApi.post<CreateSocialMediaResponse>(\n      '/v1/social-media/create/',\n      {\n        variation,\n        profileHashes,\n        network,\n      },\n    );\n    SocialMediaService.throwOnError(res);\n    return res.data;\n  }\n\n  async updateSocialMedia({ token, profileHashes }: UpdateSocialMediaRequest) {\n    const res = await this.socialMediaApi.put(\n      '/v1/social-media/update/',\n      {\n        profileHashes,\n      },\n      {\n        headers: {\n          Authorization: `Token ${token}`,\n        },\n      },\n    );\n    SocialMediaService.throwOnError(res);\n  }\n\n  async deleteSocialMediaProfile(token: string) {\n    const res = await this.socialMediaApi.delete(\n      '/v1/social-media/delete/',\n      {},\n      {\n        headers: {\n          Authorization: `Token ${token}`,\n        },\n      },\n    );\n    SocialMediaService.throwOnError(res);\n  }\n\n  async querySocialMedia(payload: SocialMediaQueryRequest) {\n    const res = await this.socialMediaApi.post<SocialMediaQueryResponse>(\n      '/v1/social-media/query/',\n      payload,\n    );\n    SocialMediaService.throwOnError(res);\n    return res.data;\n  }\n}\n\nexport { SocialMediaService };\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}