{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RecoverAccount = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _RestoreScreen = require(\"./RestoreScreen\");\n\nvar _fonts = require(\"../../../theme/fonts\");\n\nvar _colors = require(\"../../../theme/colors\");\n\nvar _deviceConstants = require(\"../../../utils/deviceConstants\");\n\nvar _reactNativeSpinkit = _interopRequireDefault(require(\"react-native-spinkit\"));\n\nvar _Ionicons = _interopRequireDefault(require(\"react-native-vector-icons/Ionicons\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nvar _this = this,\n    _jsxFileName = \"/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/RecoveryFlow/RecoverAccount.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar RecoverAccount = function RecoverAccount(_ref) {\n  var currentStep = _ref.currentStep,\n      errorMessage = _ref.errorMessage,\n      recoveredConnections = _ref.recoveredConnections,\n      recoveredGroups = _ref.recoveredGroups;\n\n  var _useState = (0, _react.useState)(''),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      stateDescription = _useState2[0],\n      setStateDescription = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(undefined),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      iconData = _useState4[0],\n      setIconData = _useState4[1];\n\n  var _useTranslation = (0, _reactI18next.useTranslation)(),\n      t = _useTranslation.t;\n\n  (0, _react.useEffect)(function () {\n    switch (currentStep) {\n      case _RestoreScreen.AccountSteps.WAITING_DOWNLOAD:\n      case _RestoreScreen.AccountSteps.DOWNLOAD_COMPLETE:\n        setIconData(undefined);\n        setStateDescription(t('recovery.steps.downloading', 'Downloading data from recovery connections...'));\n        break;\n\n      case _RestoreScreen.AccountSteps.WAITING_OPERATION:\n      case _RestoreScreen.AccountSteps.OPERATION_APPLIED:\n        setIconData(undefined);\n        setStateDescription(t('recovery.steps.recovering', 'Recovering account...'));\n        break;\n\n      case _RestoreScreen.AccountSteps.COMPLETE:\n        setIconData({\n          color: _colors.GREEN,\n          name: 'checkmark-circle-outline'\n        });\n        setStateDescription(t('recovery.steps.complete', 'Account recovery complete'));\n        break;\n\n      case _RestoreScreen.AccountSteps.ERROR:\n        setIconData({\n          color: _colors.RED,\n          name: 'alert-circle-outline'\n        });\n        setStateDescription(t('recovery.steps.error', 'Account recovery failed'));\n        break;\n\n      default:\n        setStateDescription(\"Unhandled state \" + _RestoreScreen.AccountSteps[currentStep]);\n        break;\n    }\n  }, [currentStep, t]);\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.headerTextContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.headerText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, t('recovery.header.text', {\n    defaultValue: 'Part 1: Recover account'\n  })), _react.default.createElement(_reactNative.Text, {\n    style: styles.headerInfoText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, t('recovery.info', {\n    defaultValue: 'This step will recover your BrightID on this device. Names and photos of connections in common with your recovery connections will be restored.'\n  }))), _react.default.createElement(_reactNative.View, {\n    style: styles.statusContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, iconData ? _react.default.createElement(_Ionicons.default, {\n    style: {\n      alignSelf: 'center'\n    },\n    size: _deviceConstants.DEVICE_LARGE ? 64 : 44,\n    name: iconData.name,\n    color: iconData.color,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }) : _react.default.createElement(_reactNativeSpinkit.default, {\n    isVisible: true,\n    size: _deviceConstants.DEVICE_LARGE ? 64 : 44,\n    type: \"Wave\",\n    color: _colors.ORANGE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  })), _react.default.createElement(_reactNative.View, {\n    style: styles.infoTextContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: styles.infoText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, stateDescription), _react.default.createElement(_reactNative.Text, {\n    style: styles.infoSubText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, currentStep === _RestoreScreen.AccountSteps.ERROR ? errorMessage : t('recovery.state', {\n    defaultValue: 'Recovered {{recoveredConnections}} connections, {{recoveredGroups}} groups',\n    recoveredConnections: recoveredConnections,\n    recoveredGroups: recoveredGroups\n  })))));\n};\n\nexports.RecoverAccount = RecoverAccount;\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%'\n  },\n  headerTextContainer: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  headerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: _fonts.fontSize[20],\n    color: _colors.BLACK\n  },\n  headerInfoText: {\n    fontFamily: 'Poppins-Regular',\n    textAlign: 'center',\n    color: _colors.DARKER_GREY,\n    fontSize: _fonts.fontSize[12],\n    maxWidth: '90%'\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginLeft: 20,\n    alignItems: 'center'\n  },\n  infoTextContainer: {\n    flex: 1,\n    marginLeft: 10\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: _fonts.fontSize[16],\n    color: _colors.BLACK\n  },\n  infoSubText: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: _fonts.fontSize[10],\n    color: _colors.BLACK\n  }\n});","map":{"version":3,"names":["RecoverAccount","currentStep","errorMessage","recoveredConnections","recoveredGroups","useState","stateDescription","setStateDescription","undefined","iconData","setIconData","useTranslation","t","useEffect","AccountSteps","WAITING_DOWNLOAD","DOWNLOAD_COMPLETE","WAITING_OPERATION","OPERATION_APPLIED","COMPLETE","color","GREEN","name","ERROR","RED","styles","container","headerTextContainer","headerText","defaultValue","headerInfoText","statusContainer","alignSelf","DEVICE_LARGE","ORANGE","infoTextContainer","infoText","infoSubText","StyleSheet","create","justifyContent","alignItems","width","fontFamily","fontSize","BLACK","textAlign","DARKER_GREY","maxWidth","flexDirection","marginTop","marginLeft","flex"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/RecoveryFlow/RecoverAccount.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport { AccountSteps } from '@/components/Onboarding/RecoveryFlow/RestoreScreen';\nimport { fontSize } from '@/theme/fonts';\nimport { BLACK, DARKER_GREY, GREEN, ORANGE, RED } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport Spinner from 'react-native-spinkit';\nimport IonIcons from 'react-native-vector-icons/Ionicons';\nimport { useTranslation } from 'react-i18next';\n\n/* Component to track account recovery */\ntype RecoverAccountParams = {\n  currentStep: AccountSteps;\n  errorMessage: string;\n  recoveredGroups: number;\n  recoveredConnections: number;\n};\nexport const RecoverAccount = ({\n  currentStep,\n  errorMessage,\n  recoveredConnections,\n  recoveredGroups,\n}: RecoverAccountParams) => {\n  const [stateDescription, setStateDescription] = useState('');\n  const [iconData, setIconData] = useState<{ color: string; name: string }>(\n    undefined,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    switch (currentStep) {\n      case AccountSteps.WAITING_DOWNLOAD:\n      case AccountSteps.DOWNLOAD_COMPLETE:\n        setIconData(undefined);\n        setStateDescription(\n          t(\n            'recovery.steps.downloading',\n            'Downloading data from recovery connections...',\n          ),\n        );\n        break;\n      case AccountSteps.WAITING_OPERATION:\n      case AccountSteps.OPERATION_APPLIED:\n        setIconData(undefined);\n        setStateDescription(\n          t('recovery.steps.recovering', 'Recovering account...'),\n        );\n        break;\n      case AccountSteps.COMPLETE:\n        setIconData({ color: GREEN, name: 'checkmark-circle-outline' });\n        setStateDescription(\n          t('recovery.steps.complete', 'Account recovery complete'),\n        );\n        break;\n      case AccountSteps.ERROR:\n        setIconData({ color: RED, name: 'alert-circle-outline' });\n        setStateDescription(\n          t('recovery.steps.error', 'Account recovery failed'),\n        );\n        break;\n      default:\n        setStateDescription(`Unhandled state ${AccountSteps[currentStep]}`);\n        break;\n    }\n  }, [currentStep, t]);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.headerTextContainer}>\n        <Text style={styles.headerText}>\n          {t('recovery.header.text', {\n            defaultValue: 'Part 1: Recover account',\n          })}\n        </Text>\n\n        <Text style={styles.headerInfoText}>\n          {t('recovery.info', {\n            defaultValue:\n              'This step will recover your BrightID on this device. Names and photos of connections in common with your recovery connections will be restored.',\n          })}\n        </Text>\n      </View>\n      <View style={styles.statusContainer}>\n        <View>\n          {iconData ? (\n            <IonIcons\n              style={{ alignSelf: 'center' }}\n              size={DEVICE_LARGE ? 64 : 44}\n              name={iconData.name}\n              color={iconData.color}\n            />\n          ) : (\n            <Spinner\n              isVisible={true}\n              size={DEVICE_LARGE ? 64 : 44}\n              type=\"Wave\"\n              color={ORANGE}\n            />\n          )}\n        </View>\n        <View style={styles.infoTextContainer}>\n          <Text style={styles.infoText}>{stateDescription}</Text>\n          <Text style={styles.infoSubText}>\n            {currentStep === AccountSteps.ERROR\n              ? errorMessage\n              : t('recovery.state', {\n                  defaultValue:\n                    'Recovered {{recoveredConnections}} connections, {{recoveredGroups}} groups',\n                  recoveredConnections,\n                  recoveredGroups,\n                })}\n          </Text>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  headerTextContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[20],\n    color: BLACK,\n  },\n  headerInfoText: {\n    fontFamily: 'Poppins-Regular',\n    textAlign: 'center',\n    color: DARKER_GREY,\n    fontSize: fontSize[12],\n    maxWidth: '90%',\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginLeft: 20,\n    alignItems: 'center',\n  },\n  infoTextContainer: {\n    flex: 1,\n    marginLeft: 10,\n  },\n  infoText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    color: BLACK,\n  },\n  infoSubText: {\n    fontFamily: 'Poppins-Regular',\n    fontSize: fontSize[10],\n    color: BLACK,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}