{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _store = require(\"../store\");\n\nvar _constants = require(\"../utils/constants\");\n\nvar _deviceConstants = require(\"../utils/deviceConstants\");\n\nvar _colors = require(\"../theme/colors\");\n\nvar _toolkit = require(\"@reduxjs/toolkit\");\n\nvar _stack = require(\"@react-navigation/stack\");\n\nvar _NotificationBell = _interopRequireDefault(require(\"../components/Icons/NotificationBell\"));\n\nvar _Menu = _interopRequireDefault(require(\"../components/Icons/Menu\"));\n\nvar _pendingConnectionSlice = require(\"../components/PendingConnections/pendingConnectionSlice\");\n\nvar _NavigationService = require(\"../NavigationService\");\n\nvar _HomeDrawer = require(\"./HomeDrawer\");\n\nvar _this = this,\n    _jsxFileName = \"/home/ali/Desktop/brightid/BrightID/BrightID/src/routes/Home.tsx\";\n\nvar unconfirmedSelector = (0, _toolkit.createSelector)(_pendingConnectionSlice.selectAllPendingConnections, function (pendingConnections) {\n  return pendingConnections.filter(function (pc) {\n    return pc.state === _pendingConnectionSlice.pendingConnection_states.UNCONFIRMED;\n  });\n});\nvar inviteSelector = (0, _toolkit.createSelector)(function (state) {\n  return state.groups.invites;\n}, function (invites) {\n  return invites.filter(function (_ref) {\n    var state = _ref.state;\n    return state === _constants.INVITE_ACTIVE;\n  });\n});\n\nvar NotificationBell = function NotificationBell() {\n  var pendingConnections = (0, _store.useSelector)(function (state) {\n    var _unconfirmedSelector;\n\n    return (_unconfirmedSelector = unconfirmedSelector(state)) == null ? void 0 : _unconfirmedSelector.length;\n  });\n  var invites = (0, _store.useSelector)(function (state) {\n    var _inviteSelector;\n\n    return (_inviteSelector = inviteSelector(state)) == null ? void 0 : _inviteSelector.length;\n  });\n  var backupPending = (0, _store.useSelector)(function (state) {\n    return state.notifications.backupPending;\n  });\n  var displayBadge = backupPending || invites || pendingConnections;\n  return _react.default.createElement(_reactNative.TouchableOpacity, {\n    testID: \"notificationsBtn\",\n    style: {\n      marginRight: 25\n    },\n    onPress: function onPress() {\n      _reactNative.Keyboard.dismiss();\n\n      (0, _NavigationService.resetNotifications)();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_NotificationBell.default, {\n    color: _colors.BLACK,\n    alert: !!displayBadge,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar BrightIdLogo = function BrightIdLogo() {\n  return _react.default.createElement(_reactNative.TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      _reactNative.Keyboard.dismiss();\n\n      (0, _NavigationService.resetHome)();\n    },\n    testID: \"BrightIdLogo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.Image, {\n    source: require(\"../static/brightid-final.png\"),\n    accessible: true,\n    accessibilityLabel: \"Home Header Logo\",\n    resizeMode: \"contain\",\n    style: {\n      width: _deviceConstants.DEVICE_LARGE ? 104 : 85,\n      maxHeight: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar homeScreenOptions = {\n  headerTitle: function headerTitle() {\n    return _react.default.createElement(BrightIdLogo, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 22\n      }\n    });\n  },\n  headerLeft: function headerLeft() {\n    return _react.default.createElement(_reactNative.TouchableOpacity, {\n      testID: \"toggleDrawer\",\n      style: {\n        width: _deviceConstants.DEVICE_LARGE ? 80 : 70,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      onPress: function onPress() {\n        _reactNative.Keyboard.dismiss();\n\n        (0, _NavigationService.toggleDrawer)();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, _react.default.createElement(_Menu.default, {\n      width: _deviceConstants.DEVICE_LARGE ? 30 : 24,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }));\n  },\n  headerRight: function headerRight() {\n    return _react.default.createElement(NotificationBell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 22\n      }\n    });\n  },\n  headerStyle: {\n    height: _deviceConstants.DEVICE_LARGE ? 80 : 70,\n    shadowRadius: 0,\n    elevation: -1\n  },\n  headerTitleAlign: 'center',\n  headerTintColor: 'transparent',\n  headerTransparent: true\n};\nvar Stack = (0, _stack.createStackNavigator)();\n\nvar Home = function Home() {\n  return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(Stack.Screen, {\n    name: \"Home\",\n    component: _HomeDrawer.HomeDrawer,\n    options: homeScreenOptions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar _default = Home;\nexports.default = _default;","map":{"version":3,"names":["unconfirmedSelector","createSelector","selectAllPendingConnections","pendingConnections","filter","pc","state","pendingConnection_states","UNCONFIRMED","inviteSelector","groups","invites","INVITE_ACTIVE","NotificationBell","useSelector","length","backupPending","notifications","displayBadge","marginRight","Keyboard","dismiss","resetNotifications","BLACK","BrightIdLogo","resetHome","require","width","DEVICE_LARGE","maxHeight","homeScreenOptions","headerTitle","headerLeft","alignItems","justifyContent","toggleDrawer","headerRight","headerStyle","height","shadowRadius","elevation","headerTitleAlign","headerTintColor","headerTransparent","Stack","createStackNavigator","Home","HomeDrawer"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/routes/Home.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  TouchableWithoutFeedback,\n  Keyboard,\n  Image,\n  TouchableOpacity,\n} from 'react-native';\nimport { useSelector } from '@/store';\nimport { INVITE_ACTIVE } from '@/utils/constants';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport { BLACK } from '@/theme/colors';\nimport { createSelector } from '@reduxjs/toolkit';\nimport {\n  createStackNavigator,\n  StackNavigationOptions,\n} from '@react-navigation/stack';\nimport Bell from '@/components/Icons/NotificationBell';\nimport Menu from '@/components/Icons/Menu';\nimport {\n  pendingConnection_states,\n  selectAllPendingConnections,\n} from '@/components/PendingConnections/pendingConnectionSlice';\nimport {\n  toggleDrawer,\n  resetHome,\n  resetNotifications,\n} from '@/NavigationService';\nimport { HomeDrawer } from './HomeDrawer';\n\n/** SELECTORS */\n\nconst unconfirmedSelector = createSelector(\n  selectAllPendingConnections,\n  (pendingConnections) =>\n    pendingConnections.filter(\n      // @ts-ignore\n      (pc) => pc.state === pendingConnection_states.UNCONFIRMED,\n    ),\n);\n\nconst inviteSelector = createSelector(\n  (state: State) => state.groups.invites,\n  (invites) => invites.filter(({ state }) => state === INVITE_ACTIVE),\n);\n\n/** COMPONENTS */\n\nconst NotificationBell = () => {\n  const pendingConnections = useSelector(\n    (state: State) => unconfirmedSelector(state)?.length,\n  );\n\n  const invites = useSelector((state: State) => inviteSelector(state)?.length);\n\n  const backupPending = useSelector(\n    (state: State) => state.notifications.backupPending,\n  );\n\n  const displayBadge = backupPending || invites || pendingConnections;\n\n  return (\n    <TouchableOpacity\n      testID=\"notificationsBtn\"\n      style={{ marginRight: 25 }}\n      onPress={() => {\n        Keyboard.dismiss();\n        resetNotifications();\n      }}\n    >\n      <Bell color={BLACK} alert={!!displayBadge} />\n    </TouchableOpacity>\n  );\n};\n\n/** OPTIONS */\n\nconst BrightIdLogo = () => {\n  return (\n    <TouchableWithoutFeedback\n      onPress={() => {\n        Keyboard.dismiss();\n        resetHome();\n      }}\n      testID=\"BrightIdLogo\"\n    >\n      <Image\n        source={require('@/static/brightid-final.png')}\n        accessible={true}\n        accessibilityLabel=\"Home Header Logo\"\n        resizeMode=\"contain\"\n        style={{ width: DEVICE_LARGE ? 104 : 85, maxHeight: 80 }}\n      />\n    </TouchableWithoutFeedback>\n  );\n};\n\nconst homeScreenOptions: StackNavigationOptions = {\n  headerTitle: () => <BrightIdLogo />,\n  headerLeft: () => {\n    return (\n      <TouchableOpacity\n        testID=\"toggleDrawer\"\n        style={{\n          width: DEVICE_LARGE ? 80 : 70,\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n        onPress={() => {\n          Keyboard.dismiss();\n          toggleDrawer();\n        }}\n      >\n        <Menu width={DEVICE_LARGE ? 30 : 24} />\n      </TouchableOpacity>\n    );\n  },\n  headerRight: () => <NotificationBell />,\n  headerStyle: {\n    height: DEVICE_LARGE ? 80 : 70,\n    shadowRadius: 0,\n    elevation: -1,\n  },\n  headerTitleAlign: 'center',\n  headerTintColor: 'transparent',\n  headerTransparent: true,\n};\n\n/** SCREENS */\n\nconst Stack = createStackNavigator();\n\nconst Home = () => {\n  /* /!\\ Moved 'RecoveringConnection' options to the component in order to access to useTranslation() */\n  // const { t } = useTranslation();\n  return (\n    <>\n      <Stack.Screen\n        name=\"Home\"\n        component={HomeDrawer}\n        options={homeScreenOptions}\n      />\n    </>\n  );\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}