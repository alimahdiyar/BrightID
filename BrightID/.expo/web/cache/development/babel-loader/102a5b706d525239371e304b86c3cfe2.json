{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { useCallback, useContext, useEffect, useState, useRef } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport { useTranslation } from 'react-i18next';\nimport { any, propEq, find } from 'ramda';\nimport { useFocusEffect, useNavigation, useRoute } from '@react-navigation/native';\nimport { useHeaderHeight } from '@react-navigation/stack';\nimport _ from 'lodash';\nimport Spinner from 'react-native-spinkit';\nimport { linkedContextTotal, selectAllLinkedContexts, selectAllLinkedSigs } from \"../../reducer/appsSlice\";\nimport { useDispatch, useSelector } from \"../../store\";\nimport EmptyList from \"../Helpers/EmptyList\";\nimport { ORANGE, WHITE } from \"../../theme/colors\";\nimport { DEVICE_LARGE } from \"../../utils/deviceConstants\";\nimport { fetchApps, selectAllApps, selectPendingLinkedContext } from \"../../actions\";\nimport { fontSize } from \"../../theme/fonts\";\nimport { NodeApiContext } from \"../NodeApiGate\";\nimport { isVerified } from \"../../utils/verifications\";\nimport AppCard from \"./AppCard\";\nimport { handleV5App, handleV6App } from \"./model\";\nimport AnimatedLinearGradient from \"./AnimatedLinearGradient\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport var AppsScreen = function AppsScreen() {\n  var filters = [{\n    name: 'All Apps',\n    id: 1\n  }, {\n    name: 'Linked',\n    id: 2\n  }, {\n    name: 'Verified',\n    id: 3\n  }];\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n  var route = useRoute();\n  var api = useContext(NodeApiContext);\n  var headerHeight = useHeaderHeight();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var apps = useSelector(selectAllApps);\n  var isSponsored = useSelector(function (state) {\n    return state.user.isSponsored || state.user.isSponsoredv6;\n  });\n  var linkedContext = useSelector(selectAllLinkedContexts);\n  var linkedContextsCount = useSelector(linkedContextTotal);\n  var selectLinkedSigs = useSelector(selectAllLinkedSigs);\n  var pendingLink = useSelector(selectPendingLinkedContext);\n  var userVerifications = useSelector(function (state) {\n    return state.user.verifications;\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      refreshing = _useState2[0],\n      setRefreshing = _useState2[1];\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sponsoringApp = _useState4[0],\n      setSponsoringApp = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalApps = _useState6[0],\n      setTotalApps = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      totalVerifiedApp = _useState8[0],\n      setTotalVerifiedApp = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      search = _useState10[0],\n      setSearch = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      activefilter = _useState12[0],\n      SetFilter = _useState12[1];\n\n  var _useState13 = useState(apps),\n      _useState14 = _slicedToArray(_useState13, 2),\n      filteredApp = _useState14[0],\n      setFilteredApp = _useState14[1];\n\n  var scrollY = useRef(new Animated.Value(0)).current;\n  var notifHeight = useRef(new Animated.Value(0)).current;\n  var fadeBackgroundSearch = scrollY.interpolate({\n    inputRange: [0, 230],\n    outputRange: [0, 1]\n  });\n  var fadeBackgroundHeader = scrollY.interpolate({\n    inputRange: [0, 100],\n    outputRange: [1, 0]\n  });\n  var translateYHeader = scrollY.interpolate({\n    inputRange: [0, 290],\n    outputRange: [0, -290],\n    extrapolate: 'clamp'\n  });\n  var translateYSearch = scrollY.interpolate({\n    inputRange: [-640, 0, 290],\n    outputRange: [790, notifHeight._value + 160, 0],\n    extrapolate: 'clamp'\n  });\n  var handleScroll = Animated.event([{\n    nativeEvent: {\n      contentOffset: {\n        y: scrollY\n      }\n    }\n  }], {\n    useNativeDriver: true\n  });\n  var showView = Animated.timing(notifHeight, {\n    toValue: 100,\n    duration: 500,\n    easing: Easing.linear,\n    useNativeDriver: false\n  });\n  var closeView = Animated.timing(notifHeight, {\n    toValue: 0,\n    duration: 500,\n    easing: Easing.linear,\n    useNativeDriver: false\n  });\n  var refreshApps = useCallback(function () {\n    setRefreshing(true);\n    dispatch(fetchApps(api)).then(function () {\n      setRefreshing(false);\n    }).catch(function (err) {\n      console.log(err.message);\n      setRefreshing(false);\n    });\n  }, [api, dispatch]);\n  var handleV5DeepLink = useCallback(function () {\n    var _route$params;\n\n    var context = (_route$params = route.params) == null ? void 0 : _route$params.context;\n    var isValidApp = any(propEq('id', context))(apps);\n    var isValidContext = any(propEq('context', context))(apps);\n\n    if (isValidApp || isValidContext) {\n      handleV5App(route.params, setSponsoringApp, api);\n    } else {\n      Alert.alert(t('apps.alert.title.invalidContext'), t('apps.alert.text.invalidContext', {\n        context: \"\" + context\n      }));\n    }\n\n    navigation.setParams({\n      baseUrl: '',\n      context: '',\n      contextId: ''\n    });\n  }, [navigation, route.params, apps, api, t]);\n  var handleV6DeepLink = useCallback(function () {\n    var _route$params2;\n\n    var appId = (_route$params2 = route.params) == null ? void 0 : _route$params2.context;\n    var appInfo = find(propEq('id', appId))(apps);\n\n    if (api && appInfo && appInfo.usingBlindSig) {\n      handleV6App(route.params, setSponsoringApp, api);\n    } else {\n      Alert.alert(t('apps.alert.title.invalidApp'), t('apps.alert.text.invalidApp', {\n        app: \"\" + appId\n      }));\n    }\n\n    navigation.setParams({\n      context: '',\n      contextId: ''\n    });\n  }, [route.params, apps, navigation, api, t]);\n  useEffect(function () {\n    var _route$params3, _route$params4;\n\n    if (apps.length > 0 && (_route$params3 = route.params) != null && _route$params3.baseUrl) {\n      handleV5DeepLink();\n    } else if (apps.length > 0 && (_route$params4 = route.params) != null && _route$params4.context) {\n      handleV6DeepLink();\n    }\n  }, [apps, handleV5DeepLink, handleV6DeepLink, route.params]);\n  useEffect(function () {\n    var allApps = apps.filter(function (app) {\n      var isLinked = linkedContext.find(function (link) {\n        return link.context === app.context;\n      });\n      var isLinkedTemp = isLinked && isLinked.state === 'applied';\n      return !app.testing || isLinkedTemp;\n    });\n    var linkedApps = allApps.filter(function (app) {\n      var appSig = selectLinkedSigs.filter(function (sig) {\n        return sig.app === app.id;\n      });\n      var isLinked = linkedContext.find(function (link) {\n        return link.context === app.context;\n      });\n      var isLinkedTemp = isLinked && isLinked.state === 'applied';\n      return app.usingBlindSig && appSig.length > 0 || isLinkedTemp;\n    });\n    var verifiedApps = allApps.filter(function (app) {\n      var count = 0;\n\n      for (var _iterator = _createForOfIteratorHelperLoose(app.verifications), _step; !(_step = _iterator()).done;) {\n        var verification = _step.value;\n        var verified = isVerified(_.keyBy(userVerifications, function (v) {\n          return v.name;\n        }), verification);\n\n        if (verified) {\n          count++;\n        }\n      }\n\n      return count === app.verifications.length;\n    });\n    setTotalApps(allApps.length);\n    setTotalVerifiedApp(verifiedApps.length);\n    var filteredApp = [];\n\n    if (activefilter === 0) {\n      filteredApp = allApps;\n    } else if (activefilter === 1) {\n      filteredApp = linkedApps;\n    } else if (activefilter === 2) {\n      filteredApp = verifiedApps;\n    }\n\n    if (search !== '') {\n      var filterResult = filteredApp.filter(function (app) {\n        return app.name.toLowerCase().indexOf(search.toLowerCase()) !== -1;\n      });\n      setFilteredApp(filterResult);\n    } else {\n      setFilteredApp(filteredApp);\n    }\n  }, [search, activefilter, apps, selectLinkedSigs, linkedContext, userVerifications]);\n  useFocusEffect(refreshApps);\n\n  var OverallDescription = function OverallDescription() {\n    var msg, waiting;\n    showView.start();\n\n    if (sponsoringApp) {\n      msg = t('apps.text.sponsoring', {\n        app: \"\" + sponsoringApp.name\n      });\n      waiting = true;\n    } else if (pendingLink) {\n      msg = t('apps.text.pendingLink', {\n        context: \"\" + pendingLink.context\n      });\n      waiting = true;\n    } else if (!isSponsored) {\n      msg = t('apps.text.notSponsored');\n      waiting = false;\n    } else {\n      msg = '';\n      waiting = false;\n      closeView.start();\n    }\n\n    return _jsxs(AnimatedLinearGradient, {\n      containerStyle: [styles.headerContainer, {\n        height: 310 + notifHeight._value,\n        opacity: fadeBackgroundHeader,\n        transform: [{\n          translateY: translateYHeader\n        }]\n      }],\n      style: {\n        paddingHorizontal: 20,\n        paddingTop: headerHeight\n      },\n      colors: ['#3E4481', '#999ECD', '#ED7A5D'],\n      children: [msg ? _jsxs(Animated.View, {\n        style: [styles.statusContainer, {\n          maxHeight: notifHeight\n        }],\n        children: [_jsx(Spinner, {\n          isVisible: waiting,\n          size: DEVICE_LARGE ? 48 : 42,\n          type: \"ThreeBounce\",\n          color: WHITE\n        }), _jsx(Text, {\n          style: styles.statusMessage,\n          children: msg\n        })]\n      }) : _jsx(View, {}), _jsxs(View, {\n        style: styles.rowContainer,\n        children: [_jsxs(View, {\n          style: styles.appDetailContainer,\n          children: [_jsx(Text, {\n            style: styles.detailLabel,\n            children: \"Total\"\n          }), _jsxs(Text, {\n            style: styles.detail,\n            children: [totalApps, \" \", _jsx(Text, {\n              style: styles.detailLabel,\n              children: \"apps\"\n            })]\n          })]\n        }), _jsx(View, {\n          style: {\n            width: 10\n          }\n        }), _jsxs(View, {\n          style: styles.appDetailContainer,\n          children: [_jsx(Text, {\n            style: styles.detailLabel,\n            children: \"You're linked to\"\n          }), _jsxs(Text, {\n            style: styles.detail,\n            children: [linkedContextsCount, _jsx(Text, {\n              style: styles.detailLabel,\n              children: \" apps\"\n            })]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: styles.criteriaContainer,\n        children: [_jsx(Text, {\n          style: styles.detailLabel,\n          children: \"You meet the verification criteria of\"\n        }), _jsxs(Text, {\n          style: [styles.detail, {\n            textAlign: 'right'\n          }],\n          children: [totalVerifiedApp, \" \", _jsx(Text, {\n            style: styles.detailLabel,\n            children: \"apps\"\n          })]\n        })]\n      })]\n    });\n  };\n\n  var Filter = function Filter() {\n    return _jsxs(_Fragment, {\n      children: [_jsx(Animated.View, {\n        testID: \"searchBarBackground\",\n        style: [styles.searchBackground, {\n          top: headerHeight,\n          opacity: fadeBackgroundSearch\n        }]\n      }), _jsxs(Animated.View, {\n        style: [styles.searchContainer, {\n          top: headerHeight + 10,\n          transform: [{\n            translateY: translateYSearch\n          }]\n        }],\n        children: [_jsx(TextInput, {\n          style: [styles.shadow, styles.textInput],\n          onChangeText: function onChangeText(value) {\n            return setSearch(value);\n          },\n          placeholder: \"App name\",\n          value: search\n        }), _jsx(View, {\n          style: styles.filterContainer,\n          children: filters.map(function (item, index) {\n            return _jsx(TouchableOpacity, {\n              style: [styles.filterItemContainer, {\n                backgroundColor: index === activefilter ? ORANGE : WHITE\n              }],\n              onPress: function onPress() {\n                return SetFilter(index);\n              },\n              children: _jsx(Text, {\n                style: {\n                  fontFamily: 'Poppins-Medium',\n                  fontSize: 12,\n                  color: index === activefilter ? WHITE : ORANGE\n                },\n                children: item.name\n              })\n            }, index);\n          })\n        })]\n      })]\n    });\n  };\n\n  return _jsx(_Fragment, {\n    children: _jsxs(View, {\n      style: styles.container,\n      testID: \"appsScreen\",\n      children: [_jsx(AnimatedLinearGradient, {\n        containerStyle: [styles.headerTitleContainer, {\n          height: headerHeight,\n          opacity: fadeBackgroundSearch\n        }],\n        colors: ['#3E4481', '#999ECD']\n      }), _jsx(OverallDescription, {}), _jsx(Filter, {}), _jsx(Animated.FlatList, {\n        testID: \"appsList\",\n        data: filteredApp,\n        onScroll: handleScroll,\n        scrollEventThrottle: 16,\n        numColumns: 2,\n        columnWrapperStyle: styles.wrapperColumn,\n        contentContainerStyle: [styles.contentContainer, {\n          marginTop: headerHeight + 190 + notifHeight._value\n        }],\n        keyExtractor: function keyExtractor(_ref, index) {\n          var name = _ref.name;\n          return name + index;\n        },\n        showsHorizontalScrollIndicator: false,\n        showsVerticalScrollIndicator: false,\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item;\n          return _jsx(AppCard, _objectSpread({}, item));\n        },\n        ListEmptyComponent: _jsx(EmptyList, {\n          title: t('apps.text.noApps'),\n          iconType: \"flask\"\n        }),\n        refreshControl: _jsx(RefreshControl, {\n          refreshing: refreshing,\n          onRefresh: refreshApps\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  orangeTop: {\n    backgroundColor: ORANGE,\n    height: DEVICE_LARGE ? 70 : 65,\n    width: '100%',\n    zIndex: 1\n  },\n  container: {\n    flex: 1\n  },\n  shadow: _objectSpread(_objectSpread({}, Platform.select({\n    android: {\n      shadowColor: 'rgba(0,0,0,1)'\n    },\n    ios: {\n      shadowColor: 'rgba(0,0,0,0.2)'\n    }\n  })), {}, {\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 1,\n    shadowRadius: 4,\n    elevation: 5\n  }),\n  centerItem: {\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  statusContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 10,\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    padding: 12,\n    borderRadius: 10\n  },\n  statusMessage: {\n    fontFamily: 'Poppins-Medium',\n    textAlign: 'center',\n    fontSize: fontSize[14],\n    color: WHITE\n  },\n  linkingContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginTop: 20\n  },\n  headerTitleContainer: {\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    zIndex: 100\n  },\n  headerContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    width: '100%'\n  },\n  rowContainer: {\n    flexGrow: 0.4,\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  appDetailContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    padding: 12,\n    borderRadius: 10\n  },\n  criteriaContainer: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    padding: 12,\n    borderRadius: 10,\n    justifyContent: 'space-between',\n    marginTop: 10,\n    alignItems: 'center'\n  },\n  detailLabel: {\n    flex: 1,\n    fontFamily: 'Poppins-Light',\n    fontSize: 13,\n    color: WHITE\n  },\n  detail: {\n    flex: 1,\n    fontFamily: 'Poppins-Bold',\n    fontSize: 20,\n    color: WHITE\n  },\n  textInput: {\n    backgroundColor: 'white',\n    width: '90%',\n    height: 50,\n    borderRadius: 5,\n    paddingHorizontal: 10\n  },\n  wrapperColumn: {\n    justifyContent: 'space-between',\n    marginBottom: 20\n  },\n  contentContainer: {\n    paddingTop: 100,\n    paddingBottom: 500,\n    paddingHorizontal: 20,\n    backgroundColor: 'white',\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10\n  },\n  filterContainer: {\n    width: '90%',\n    flexDirection: 'row',\n    marginTop: 10\n  },\n  filterItemContainer: {\n    borderWidth: 1,\n    borderColor: ORANGE,\n    padding: 5,\n    borderRadius: 5,\n    marginRight: 5\n  },\n  searchContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    alignSelf: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: 100,\n    zIndex: 6,\n    overflow: 'visible'\n  },\n  searchBackground: {\n    position: 'absolute',\n    width: '100%',\n    height: 120,\n    backgroundColor: \"white\",\n    zIndex: 5\n  }\n});\nexport default AppsScreen;","map":{"version":3,"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Apps/AppsScreen.tsx"],"names":["AppsScreen","filters","name","id","dispatch","useDispatch","navigation","useNavigation","route","useRoute","api","useContext","headerHeight","useHeaderHeight","t","useTranslation","apps","useSelector","isSponsored","state","linkedContext","linkedContextsCount","selectLinkedSigs","pendingLink","userVerifications","refreshing","setRefreshing","useState","sponsoringApp","setSponsoringApp","totalApps","setTotalApps","totalVerifiedApp","setTotalVerifiedApp","search","setSearch","activefilter","SetFilter","filteredApp","setFilteredApp","scrollY","useRef","Animated","notifHeight","fadeBackgroundSearch","inputRange","outputRange","fadeBackgroundHeader","translateYHeader","extrapolate","translateYSearch","handleScroll","nativeEvent","contentOffset","y","useNativeDriver","showView","toValue","duration","easing","Easing","closeView","refreshApps","useCallback","fetchApps","console","err","handleV5DeepLink","context","isValidApp","any","propEq","isValidContext","handleV5App","Alert","baseUrl","contextId","handleV6DeepLink","appId","appInfo","find","handleV6App","app","useEffect","allApps","isLinked","link","isLinkedTemp","linkedApps","appSig","sig","verifiedApps","count","verification","verified","isVerified","_","v","filterResult","useFocusEffect","OverallDescription","msg","waiting","styles","height","opacity","transform","translateY","paddingHorizontal","paddingTop","maxHeight","DEVICE_LARGE","width","textAlign","Filter","top","backgroundColor","index","fontFamily","fontSize","color","item","marginTop","StyleSheet","orangeTop","zIndex","container","flex","shadow","Platform","android","shadowColor","ios","shadowOffset","shadowOpacity","shadowRadius","elevation","centerItem","alignItems","justifyContent","statusContainer","marginBottom","padding","borderRadius","statusMessage","linkingContainer","flexDirection","headerTitleContainer","position","headerContainer","left","right","rowContainer","flexGrow","appDetailContainer","criteriaContainer","detailLabel","detail","textInput","wrapperColumn","contentContainer","paddingBottom","borderTopLeftRadius","borderTopRightRadius","filterContainer","filterItemContainer","borderWidth","borderColor","marginRight","searchContainer","alignSelf","overflow","searchBackground"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n  useRef,\n} from 'react';\nimport {\n  Alert,\n  StyleSheet,\n  View,\n  Text,\n  TextInput,\n  RefreshControl,\n  Animated,\n  TouchableOpacity,\n  Platform,\n  Easing,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { any, propEq, find } from 'ramda';\nimport {\n  useFocusEffect,\n  useNavigation,\n  useRoute,\n} from '@react-navigation/native';\nimport { useHeaderHeight } from '@react-navigation/stack';\nimport _ from 'lodash';\nimport Spinner from 'react-native-spinkit';\nimport {\n  linkedContextTotal,\n  selectAllLinkedContexts,\n  selectAllLinkedSigs,\n} from '@/reducer/appsSlice';\nimport { useDispatch, useSelector } from '@/store';\nimport EmptyList from '@/components/Helpers/EmptyList';\nimport { ORANGE, BLUE, WHITE } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport {\n  fetchApps,\n  selectAllApps,\n  selectPendingLinkedContext,\n} from '@/actions';\nimport { fontSize } from '@/theme/fonts';\nimport { NodeApiContext } from '@/components/NodeApiGate';\nimport { isVerified } from '@/utils/verifications';\nimport AppCard from './AppCard';\nimport { handleV5App, handleV6App } from './model';\nimport { AppsRoute } from '@/components/Apps/types';\nimport AnimatedLinearGradient from './AnimatedLinearGradient';\n\nexport const AppsScreen = () => {\n  const filters = [\n    { name: 'All Apps', id: 1 },\n    { name: 'Linked', id: 2 },\n    { name: 'Verified', id: 3 },\n  ];\n\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const route = useRoute<AppsRoute>();\n  const api = useContext(NodeApiContext);\n  const headerHeight = useHeaderHeight();\n  const { t } = useTranslation();\n\n  const apps = useSelector(selectAllApps);\n  const isSponsored = useSelector(\n    (state: State) => state.user.isSponsored || state.user.isSponsoredv6,\n  );\n  const linkedContext = useSelector(selectAllLinkedContexts);\n  const linkedContextsCount = useSelector(linkedContextTotal);\n  const selectLinkedSigs = useSelector(selectAllLinkedSigs);\n  const pendingLink = useSelector(selectPendingLinkedContext);\n  const userVerifications = useSelector(\n    (state: State) => state.user.verifications,\n  );\n\n  const [refreshing, setRefreshing] = useState(false);\n  const [sponsoringApp, setSponsoringApp] = useState<AppInfo | undefined>(\n    undefined,\n  );\n  const [totalApps, setTotalApps] = useState(0);\n  const [totalVerifiedApp, setTotalVerifiedApp] = useState(0);\n\n  // filter state\n  const [search, setSearch] = useState('');\n  const [activefilter, SetFilter] = useState(0);\n  const [filteredApp, setFilteredApp] = useState(apps);\n\n  // Animation\n  const scrollY = useRef(new Animated.Value(0)).current;\n  const notifHeight = useRef(new Animated.Value(0)).current;\n  const fadeBackgroundSearch = scrollY.interpolate({\n    inputRange: [0, 230],\n    outputRange: [0, 1],\n  });\n  const fadeBackgroundHeader = scrollY.interpolate({\n    inputRange: [0, 100],\n    outputRange: [1, 0],\n  });\n  const translateYHeader = scrollY.interpolate({\n    inputRange: [0, 290],\n    outputRange: [0, -290],\n    extrapolate: 'clamp',\n  });\n  const translateYSearch = scrollY.interpolate({\n    inputRange: [-640, 0, 290],\n    // @ts-ignore notifHeight._value\n    outputRange: [790, notifHeight._value + 160, 0],\n    extrapolate: 'clamp',\n  });\n  const handleScroll = Animated.event(\n    [\n      {\n        nativeEvent: {\n          contentOffset: { y: scrollY },\n        },\n      },\n    ],\n    {\n      useNativeDriver: true,\n    },\n  );\n  const showView = Animated.timing(notifHeight, {\n    toValue: 100,\n    duration: 500,\n    easing: Easing.linear,\n    useNativeDriver: false, // <-- neccessary\n  });\n  const closeView = Animated.timing(notifHeight, {\n    toValue: 0,\n    duration: 500,\n    easing: Easing.linear,\n    useNativeDriver: false, // <-- neccessary\n  });\n\n  const refreshApps = useCallback(() => {\n    setRefreshing(true);\n    dispatch(fetchApps(api))\n      .then(() => {\n        setRefreshing(false);\n      })\n      .catch((err) => {\n        console.log(err.message);\n        setRefreshing(false);\n      });\n  }, [api, dispatch]);\n\n  const handleV5DeepLink = useCallback(() => {\n    const context = route.params?.context;\n    const isValidApp = any(propEq('id', context))(apps);\n    const isValidContext = any(propEq('context', context))(apps);\n    // legacy apps send context in the deep link but soulbound apps send app\n    if (isValidApp || isValidContext) {\n      handleV5App(route.params, setSponsoringApp, api);\n    } else {\n      Alert.alert(\n        t('apps.alert.title.invalidContext'),\n        t('apps.alert.text.invalidContext', { context: `${context}` }),\n      );\n    }\n    // reset params\n    navigation.setParams({\n      baseUrl: '',\n      context: '',\n      contextId: '',\n    });\n  }, [navigation, route.params, apps, api, t]);\n\n  const handleV6DeepLink = useCallback(() => {\n    const appId = route.params?.context;\n    const appInfo = find(propEq('id', appId))(apps) as AppInfo;\n    if (api && appInfo && appInfo.usingBlindSig) {\n      handleV6App(route.params, setSponsoringApp, api);\n    } else {\n      Alert.alert(\n        t('apps.alert.title.invalidApp'),\n        t('apps.alert.text.invalidApp', { app: `${appId}` }),\n      );\n    }\n    // reset params\n    navigation.setParams({\n      context: '',\n      contextId: '',\n    });\n  }, [route.params, apps, navigation, api, t]);\n\n  useEffect(() => {\n    if (apps.length > 0 && route.params?.baseUrl) {\n      handleV5DeepLink();\n    } else if (apps.length > 0 && route.params?.context) {\n      handleV6DeepLink();\n    }\n  }, [apps, handleV5DeepLink, handleV6DeepLink, route.params]);\n\n  // handle filter\n  useEffect(() => {\n    const allApps = apps.filter((app) => {\n      const isLinked = linkedContext.find(\n        (link) => link.context === app.context,\n      );\n      const isLinkedTemp = isLinked && isLinked.state === 'applied';\n      return !app.testing || isLinkedTemp;\n    });\n\n    // filter linked app\n    const linkedApps = allApps.filter((app) => {\n      const appSig = selectLinkedSigs.filter((sig) => sig.app === app.id);\n      const isLinked = linkedContext.find(\n        (link) => link.context === app.context,\n      );\n      const isLinkedTemp = isLinked && isLinked.state === 'applied';\n      return (app.usingBlindSig && appSig.length > 0) || isLinkedTemp;\n    });\n\n    // filter verified app\n    const verifiedApps = allApps.filter((app) => {\n      let count = 0;\n      for (const verification of app.verifications) {\n        const verified = isVerified(\n          _.keyBy(userVerifications, (v) => v.name),\n          verification,\n        );\n        if (verified) {\n          count++;\n        }\n      }\n\n      return count === app.verifications.length;\n    });\n\n    setTotalApps(allApps.length);\n    setTotalVerifiedApp(verifiedApps.length);\n\n    let filteredApp: AppInfo[] = [];\n    if (activefilter === 0) {\n      filteredApp = allApps;\n    } else if (activefilter === 1) {\n      filteredApp = linkedApps;\n    } else if (activefilter === 2) {\n      filteredApp = verifiedApps;\n    }\n\n    // filter using search bar\n    if (search !== '') {\n      const filterResult = filteredApp.filter(\n        (app) => app.name.toLowerCase().indexOf(search.toLowerCase()) !== -1,\n      );\n      setFilteredApp(filterResult);\n    } else {\n      setFilteredApp(filteredApp);\n    }\n  }, [\n    search,\n    activefilter,\n    apps,\n    selectLinkedSigs,\n    linkedContext,\n    userVerifications,\n  ]);\n\n  useFocusEffect(refreshApps);\n\n  const OverallDescription = () => {\n    let msg: string, waiting: boolean;\n\n    showView.start();\n\n    if (sponsoringApp) {\n      msg = t('apps.text.sponsoring', { app: `${sponsoringApp.name}` });\n      waiting = true;\n    } else if (pendingLink) {\n      msg = t('apps.text.pendingLink', { context: `${pendingLink.context}` });\n      waiting = true;\n    } else if (!isSponsored) {\n      msg = t('apps.text.notSponsored');\n      waiting = false;\n    } else {\n      msg = '';\n      waiting = false;\n      closeView.start();\n    }\n\n    return (\n      <AnimatedLinearGradient\n        containerStyle={[\n          styles.headerContainer,\n          {\n            // @ts-ignore notifHeight._value\n            height: 310 + notifHeight._value,\n            opacity: fadeBackgroundHeader,\n            transform: [{ translateY: translateYHeader }],\n          },\n        ]}\n        style={{ paddingHorizontal: 20, paddingTop: headerHeight }}\n        colors={['#3E4481', '#999ECD', '#ED7A5D']}\n      >\n        {msg ? (\n          <Animated.View\n            style={[styles.statusContainer, { maxHeight: notifHeight }]}\n          >\n            <Spinner\n              isVisible={waiting}\n              size={DEVICE_LARGE ? 48 : 42}\n              type=\"ThreeBounce\"\n              color={WHITE}\n            />\n            <Text style={styles.statusMessage}>{msg}</Text>\n          </Animated.View>\n        ) : (\n          <View />\n        )}\n\n        <View style={styles.rowContainer}>\n          <View style={styles.appDetailContainer}>\n            <Text style={styles.detailLabel}>Total</Text>\n            <Text style={styles.detail}>\n              {totalApps} <Text style={styles.detailLabel}>apps</Text>\n            </Text>\n          </View>\n          <View style={{ width: 10 }} />\n          <View style={styles.appDetailContainer}>\n            <Text style={styles.detailLabel}>You're linked to</Text>\n            <Text style={styles.detail}>\n              {linkedContextsCount}\n              <Text style={styles.detailLabel}> apps</Text>\n            </Text>\n          </View>\n        </View>\n        <View style={styles.criteriaContainer}>\n          <Text style={styles.detailLabel}>\n            You meet the verification criteria of\n          </Text>\n          <Text style={[styles.detail, { textAlign: 'right' }]}>\n            {totalVerifiedApp} <Text style={styles.detailLabel}>apps</Text>\n          </Text>\n        </View>\n      </AnimatedLinearGradient>\n    );\n  };\n\n  const Filter = () => {\n    return (\n      <>\n        <Animated.View\n          testID=\"searchBarBackground\"\n          style={[\n            styles.searchBackground,\n            { top: headerHeight, opacity: fadeBackgroundSearch },\n          ]}\n        />\n\n        <Animated.View\n          style={[\n            styles.searchContainer,\n            {\n              top: headerHeight + 10,\n              transform: [{ translateY: translateYSearch }],\n            },\n          ]}\n        >\n          <TextInput\n            style={[styles.shadow, styles.textInput]}\n            onChangeText={(value) => setSearch(value)}\n            placeholder=\"App name\"\n            value={search}\n          />\n\n          <View style={styles.filterContainer}>\n            {filters.map((item, index) => (\n              <TouchableOpacity\n                key={index}\n                style={[\n                  styles.filterItemContainer,\n                  { backgroundColor: index === activefilter ? ORANGE : WHITE },\n                ]}\n                onPress={() => SetFilter(index)}\n              >\n                <Text\n                  style={{\n                    fontFamily: 'Poppins-Medium',\n                    fontSize: 12,\n                    color: index === activefilter ? WHITE : ORANGE,\n                  }}\n                >\n                  {item.name}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </Animated.View>\n      </>\n    );\n  };\n\n  return (\n    <>\n      <View style={styles.container} testID=\"appsScreen\">\n        <AnimatedLinearGradient\n          containerStyle={[\n            styles.headerTitleContainer,\n            { height: headerHeight, opacity: fadeBackgroundSearch },\n          ]}\n          colors={['#3E4481', '#999ECD']}\n        />\n\n        <OverallDescription />\n\n        <Filter />\n\n        <Animated.FlatList\n          testID=\"appsList\"\n          data={filteredApp}\n          onScroll={handleScroll}\n          scrollEventThrottle={16}\n          numColumns={2}\n          columnWrapperStyle={styles.wrapperColumn}\n          contentContainerStyle={[\n            styles.contentContainer,\n            // @ts-ignore notifHeight._value\n            { marginTop: headerHeight + 190 + notifHeight._value },\n          ]}\n          keyExtractor={({ name }, index) => name + index}\n          showsHorizontalScrollIndicator={false}\n          showsVerticalScrollIndicator={false}\n          renderItem={({ item }) => <AppCard {...item} />}\n          ListEmptyComponent={\n            <EmptyList title={t('apps.text.noApps')} iconType=\"flask\" />\n          }\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={refreshApps} />\n          }\n        />\n      </View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  orangeTop: {\n    backgroundColor: ORANGE,\n    height: DEVICE_LARGE ? 70 : 65,\n    width: '100%',\n    zIndex: 1,\n  },\n  container: {\n    flex: 1,\n  },\n  shadow: {\n    ...Platform.select({\n      android: { shadowColor: 'rgba(0,0,0,1)' },\n      ios: { shadowColor: 'rgba(0,0,0,0.2)' },\n    }),\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 1,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  centerItem: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  statusContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 10,\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    padding: 12,\n    borderRadius: 10,\n  },\n  statusMessage: {\n    fontFamily: 'Poppins-Medium',\n    textAlign: 'center',\n    fontSize: fontSize[14],\n    color: WHITE,\n  },\n  linkingContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginTop: 20,\n  },\n  headerTitleContainer: {\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    zIndex: 100,\n  },\n  headerContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    width: '100%',\n  },\n  rowContainer: {\n    flexGrow: 0.4,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  appDetailContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    padding: 12,\n    borderRadius: 10,\n  },\n  criteriaContainer: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    padding: 12,\n    borderRadius: 10,\n    justifyContent: 'space-between',\n    marginTop: 10,\n    alignItems: 'center',\n  },\n  detailLabel: {\n    flex: 1,\n    fontFamily: 'Poppins-Light',\n    fontSize: 13,\n    color: WHITE,\n  },\n  detail: {\n    flex: 1,\n    fontFamily: 'Poppins-Bold',\n    fontSize: 20,\n    color: WHITE,\n  },\n  textInput: {\n    backgroundColor: 'white',\n    width: '90%',\n    height: 50,\n    borderRadius: 5,\n    paddingHorizontal: 10,\n  },\n  wrapperColumn: {\n    justifyContent: 'space-between',\n    marginBottom: 20,\n  },\n  contentContainer: {\n    paddingTop: 100,\n    paddingBottom: 500,\n    paddingHorizontal: 20,\n    backgroundColor: 'white',\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10,\n  },\n  filterContainer: {\n    width: '90%',\n    flexDirection: 'row',\n    marginTop: 10,\n  },\n  filterItemContainer: {\n    borderWidth: 1,\n    borderColor: ORANGE,\n    padding: 5,\n    borderRadius: 5,\n    marginRight: 5,\n  },\n  searchContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    alignSelf: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: 100,\n    zIndex: 6,\n    // marginTop: 40,\n    overflow: 'visible',\n  },\n  searchBackground: {\n    position: 'absolute',\n    width: '100%',\n    height: 120,\n    backgroundColor: `white`,\n    zIndex: 5,\n  },\n});\n\nexport default AppsScreen;\n"]},"metadata":{},"sourceType":"module"}