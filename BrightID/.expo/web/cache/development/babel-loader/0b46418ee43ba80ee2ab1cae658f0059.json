{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.SuccessScreen = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactI18next = require(\"react-i18next\");\n\nvar _store = require(\"../../../store\");\n\nvar _native = require(\"@react-navigation/native\");\n\nvar _fonts = require(\"../../../theme/fonts\");\n\nvar _colors = require(\"../../../theme/colors\");\n\nvar _deviceConstants = require(\"../../../utils/deviceConstants\");\n\nvar _backupThunks = require(\"../RecoveryFlow/thunks/backupThunks\");\n\nvar _userSlice = require(\"../../../reducer/userSlice\");\n\nvar _Detox = _interopRequireDefault(require(\"../../../utils/Detox\"));\n\nvar _thunks = require(\"./thunks\");\n\nvar _Congratulations = _interopRequireDefault(require(\"../../Icons/Congratulations\"));\n\nvar _this = this,\n    _jsxFileName = \"/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/SignUpFlow/SuccessScreen.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar TIMEOUT = 1500;\n\nvar SuccessScreen = function SuccessScreen() {\n  var _useTranslation = (0, _reactI18next.useTranslation)(),\n      t = _useTranslation.t;\n\n  var dispatch = (0, _store.useDispatch)();\n  var navigation = (0, _native.useNavigation)();\n  var password = (0, _store.useSelector)(function (state) {\n    return state.user.password;\n  });\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      endTime = _useState4[0],\n      setEndTime = _useState4[1];\n\n  (0, _native.useFocusEffect)((0, _react.useCallback)(function () {\n    var intervalID = setInterval(function () {\n      setCurrentTime(Date.now());\n    }, 300);\n    return function () {\n      clearInterval(intervalID);\n    };\n  }, []));\n  (0, _react.useEffect)(function () {\n    if (endTime && currentTime && currentTime >= endTime) {\n      dispatch((0, _thunks.saveId)());\n\n      if (password) {\n        console.log(\"Starting initial backup\");\n        dispatch((0, _backupThunks.backupAppData)()).then(function () {\n          dispatch((0, _userSlice.setBackupCompleted)(true));\n        });\n      }\n\n      return function () {\n        if (!_Detox.default) {\n          _reactNative.InteractionManager.runAfterInteractions(function () {\n            navigation.navigate('ViewPasswordWalkthrough');\n          });\n        }\n      };\n    }\n  }, [currentTime, endTime, dispatch, navigation, password]);\n  (0, _native.useFocusEffect)((0, _react.useCallback)(function () {\n    setEndTime(Date.now() + TIMEOUT);\n  }, []));\n  return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_reactNative.SafeAreaView, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.StatusBar, {\n    barStyle: \"dark-content\",\n    backgroundColor: _colors.WHITE,\n    animated: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_reactNative.View, {\n    style: styles.header,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.Image, {\n    source: require(\"../../../static/brightid-final.png\"),\n    accessible: true,\n    accessibilityLabel: \"Home Header Logo\",\n    resizeMode: \"contain\",\n    style: styles.logo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  })), _react.default.createElement(_reactNative.View, {\n    style: styles.center,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.imageContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.phoneContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNative.Image, {\n    source: require(\"../../../static/brightid-phone.png\"),\n    accessible: true,\n    accessibilityLabel: \"Home Header Logo\",\n    resizeMode: \"contain\",\n    style: styles.phone,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  })), _react.default.createElement(_Congratulations.default, {\n    width: 190,\n    height: 230,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }))), _react.default.createElement(_reactNative.Text, {\n    style: styles.registerText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, t('onboarding.text.congratulations'))), _react.default.createElement(_reactNative.View, {\n    style: styles.orangeBottom,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }));\n};\n\nexports.SuccessScreen = SuccessScreen;\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: _colors.WHITE,\n    alignItems: 'center',\n    flexDirection: 'column',\n    borderBottomLeftRadius: 58,\n    borderBottomRightRadius: 58,\n    marginBottom: _deviceConstants.DEVICE_LARGE ? 35 : 20,\n    zIndex: 2,\n    overflow: 'hidden'\n  },\n  orangeBottom: {\n    backgroundColor: _colors.ORANGE,\n    width: '100%',\n    height: 100,\n    zIndex: 1,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  header: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: '15%'\n  },\n  logo: {\n    maxWidth: '40%',\n    maxHeight: 90\n  },\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  imageContainer: {\n    width: 190,\n    height: 230\n  },\n  phoneContainer: {\n    position: 'absolute',\n    top: 25,\n    left: 25\n  },\n  phone: {\n    width: 140,\n    height: 180\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: _fonts.fontSize[16],\n    textAlign: 'center',\n    lineHeight: _deviceConstants.DEVICE_LARGE ? 26 : 24,\n    marginBottom: _deviceConstants.DEVICE_LARGE ? 50 : 45\n  }\n});\n\nvar _default = SuccessScreen;\nexports.default = _default;","map":{"version":3,"names":["TIMEOUT","SuccessScreen","useTranslation","t","dispatch","useDispatch","navigation","useNavigation","password","useSelector","state","user","useState","currentTime","setCurrentTime","endTime","setEndTime","useFocusEffect","useCallback","intervalID","setInterval","Date","now","clearInterval","useEffect","saveId","console","log","backupAppData","then","setBackupCompleted","DetoxEnabled","InteractionManager","runAfterInteractions","navigate","styles","container","WHITE","header","require","logo","center","imageContainer","phoneContainer","phone","registerText","orangeBottom","StyleSheet","create","flex","backgroundColor","alignItems","flexDirection","borderBottomLeftRadius","borderBottomRightRadius","marginBottom","DEVICE_LARGE","zIndex","overflow","ORANGE","width","height","position","bottom","left","right","justifyContent","marginTop","maxWidth","maxHeight","top","fontFamily","fontSize","textAlign","lineHeight"],"sources":["/home/ali/Desktop/brightid/BrightID/BrightID/src/components/Onboarding/SignUpFlow/SuccessScreen.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  Image,\n  InteractionManager,\n  SafeAreaView,\n  StatusBar,\n  StyleSheet,\n  Text,\n  View,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from '@/store';\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\nimport { fontSize } from '@/theme/fonts';\nimport { WHITE, ORANGE } from '@/theme/colors';\nimport { DEVICE_LARGE } from '@/utils/deviceConstants';\nimport { backupAppData } from '@/components/Onboarding/RecoveryFlow/thunks/backupThunks';\nimport { setBackupCompleted } from '@/reducer/userSlice';\nimport DetoxEnabled from '@/utils/Detox';\nimport { saveId } from './thunks';\nimport Congratulations from '../../Icons/Congratulations';\n/* Onboarding Success Screen */\n\n/* ======================================== */\n\nconst TIMEOUT = 1500;\n\nexport const SuccessScreen = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const password = useSelector((state: State) => state.user.password);\n\n  // this is used instead of a timeout\n  const [currentTime, setCurrentTime] = useState(null);\n  const [endTime, setEndTime] = useState(null);\n\n  /**\n   * update the time until\n   */\n  useFocusEffect(\n    useCallback(() => {\n      const intervalID = setInterval(() => {\n        setCurrentTime(Date.now());\n      }, 300);\n      return () => {\n        clearInterval(intervalID);\n      };\n    }, []),\n  );\n\n  useEffect(() => {\n    if (endTime && currentTime && currentTime >= endTime) {\n      // this  will cause navigation to HomeScreen\n      dispatch(saveId());\n      if (password) {\n        console.log(`Starting initial backup`);\n        dispatch(backupAppData()).then(() => {\n          dispatch(setBackupCompleted(true));\n        });\n      }\n      return () => {\n        // navigate to view password walkthrough\n        if (!DetoxEnabled) {\n          InteractionManager.runAfterInteractions(() => {\n            navigation.navigate('ViewPasswordWalkthrough');\n          });\n        }\n      };\n    }\n  }, [currentTime, endTime, dispatch, navigation, password]);\n\n  useFocusEffect(\n    useCallback(() => {\n      // wait 1.5 seconds before navigating to home page\n      setEndTime(Date.now() + TIMEOUT);\n    }, []),\n  );\n  return (\n    <>\n      <SafeAreaView style={styles.container}>\n        <StatusBar\n          barStyle=\"dark-content\"\n          backgroundColor={WHITE}\n          animated={true}\n        />\n\n        <View style={styles.header}>\n          <Image\n            source={require('@/static/brightid-final.png')}\n            accessible={true}\n            accessibilityLabel=\"Home Header Logo\"\n            resizeMode=\"contain\"\n            style={styles.logo}\n          />\n        </View>\n        <View style={styles.center}>\n          <View style={styles.imageContainer}>\n            <View style={styles.phoneContainer}>\n              <Image\n                source={require('@/static/brightid-phone.png')}\n                accessible={true}\n                accessibilityLabel=\"Home Header Logo\"\n                resizeMode=\"contain\"\n                style={styles.phone}\n              />\n            </View>\n            <Congratulations width={190} height={230} />\n          </View>\n        </View>\n        <Text style={styles.registerText}>\n          {t('onboarding.text.congratulations')}\n        </Text>\n      </SafeAreaView>\n      <View style={styles.orangeBottom} />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: WHITE,\n    alignItems: 'center',\n    flexDirection: 'column',\n    borderBottomLeftRadius: 58,\n    borderBottomRightRadius: 58,\n    marginBottom: DEVICE_LARGE ? 35 : 20,\n    zIndex: 2,\n    overflow: 'hidden',\n  },\n  orangeBottom: {\n    backgroundColor: ORANGE,\n    width: '100%',\n    height: 100,\n    zIndex: 1,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  header: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: '15%',\n  },\n  logo: {\n    maxWidth: '40%',\n    maxHeight: 90,\n  },\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  imageContainer: {\n    width: 190,\n    height: 230,\n  },\n  phoneContainer: {\n    position: 'absolute',\n    top: 25,\n    left: 25,\n  },\n  phone: {\n    width: 140,\n    height: 180,\n  },\n  registerText: {\n    fontFamily: 'Poppins-Medium',\n    fontSize: fontSize[16],\n    textAlign: 'center',\n    lineHeight: DEVICE_LARGE ? 26 : 24,\n    marginBottom: DEVICE_LARGE ? 50 : 45,\n  },\n});\n\nexport default SuccessScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}